define("modules/clean/accessibility/utils",["require","exports","modules/clean/keycode"],function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.accessibleColorPalette=["#006AFF","#0073E1","#007BC3","#007F9B","#008578","#008750","#008928","#008800","#0573EB","#0579C3","#0580A0","#05857D","#058655","#058932","#05890A","#0A71F0","#0A78CD","#0A7FAA","#0A8487","#0A855F","#0A8737","#0A880F","#0F6EF5","#0F76D7","#0F7DB4","#0F818C","#0F8669","#0F8741","#0F8819","#146DFF","#1475DC","#147BBE","#14819B","#148473","#14864B","#148723","#1969FF","#1972E1","#1979C3","#1980A0","#198278","#198550","#198728","#198700","#1E70E6","#1E79C8","#1E7FA5","#1E837D","#1E8555","#1E8832","#1E880A","#236EEB","#2376D2","#237CAF","#238187","#23845F","#23883C","#238914","#286DF5","#2876D7","#287CB4","#28808C","#288469","#288541","#288619","#2D6AFA","#2D73DC","#2D7BB9","#2D8096","#2D836E","#2D8446","#2D8823","#3267FF","#3271E1","#3279C3","#327D9B","#328378","#328550","#328528","#328600","#376EE6","#3777C8","#377DA5","#37807D","#37855A","#378632","#37860A","#3C6CEB","#3C74CD","#3C7BAA","#3C8087","#3C835F","#3C8437","#3C8614","#416AF5","#4173D7","#4179B9","#417E91","#418069","#418341","#418419","#4667FA","#466FDC","#4676BE","#467B9B","#468073","#46824B","#468423","#4B63FF","#4B6DE1","#4B75BE","#4B7B9B","#4B8078","#4B8150","#4B8228","#4B8300","#5069E6","#5072C8","#5079A5","#507C7D","#50815A","#508232","#50830A","#5567F0","#556FD2","#5575AA","#557A87","#557E5F","#55823C","#558314","#5A65F5","#5A6DD7","#5A75B4","#5A7A91","#5A7D69","#5A7F41","#5A821E","#5F61FA","#5F69DC","#5F71BE","#5F779B","#5F7E50","#5F7F28","#5F8100","#6466E6","#646DC3","#6475A5","#647D55","#647E2D","#648005","#6964EB","#696BC8","#6972A5","#697C55","#697E2D","#697F05","#6E62EB","#6E6AC8","#6E71A5","#6E7C46","#6E7E1E","#7358FF","#7363E1","#736ABE","#7372A0","#785CEB","#7864CD","#786DAF","#7D53FF","#7D5EE1","#7D66C3","#7D6EA0","#8255F5","#825FD7","#8268B9","#826D91","#8756F0","#8760D2","#8766AA","#8C4AFF","#8C56E6","#8C60C8","#8C66A0","#914BF5","#9157DC","#9160BE","#916596","#964BEB","#9655D2","#965EAF","#966691","#9B47F0","#9B51D2","#9B5CB4","#9B6191","#A041F5","#A04EDC","#A058B9","#A06196","#A53BF5","#A548DC","#A553BE","#A55A96","#AA34FA","#AA42E6","#AA4FC8","#AA58A0","#AA5F78","#AA614B","#AA6623","#AF29FF","#AF38E6","#AF47D2","#AF52AF","#AF5782","#AF5E5A","#AF622D","#AF6400","#B42CF0","#B43CD7","#B447B4","#B45291","#B45864","#B45D37","#B45D05","#B919FF","#B92CE6","#B93BC8","#B94AAA","#B9547D","#B95B4B","#B95A14","#BE0CF0","#BE1FEB","#BE31CD","#BE41B4","#BE4C87","#BE5455","#BE561E","#C307EB","#C31AE1","#C32CC8","#C33DB4","#C3488C","#C34F5A","#C35428","#C803E1","#C816E1","#C826C3","#C836AF","#C8428C","#C8495F","#C84F32","#C85200","#CD11C8","#CD22C8","#CD31AF","#CD3B87","#CD4664","#CD4B37","#CD4D0A","#D20CC3","#D21CB4","#D229A0","#D23587","#D23E64","#D23F37","#D2430F","#D708AF","#D716A0","#D72291","#D73087","#D7355F","#D73A3C","#D73A14","#DC0596","#DC119B","#DC1D91","#DC256E","#DC2E5A","#DC343C","#DC3419","#E1027D","#E10C87","#E11882","#E11B5A","#E12755","#E12A37","#E12919","#E13200","#E6075F","#E60C4B","#E61655","#E61D46","#E62132","#E61B14","#E61A00","#EB0232","#EB0214","#EB0D30"],t.accessibleTriggerProps=function(e,t){return void 0===t&&(t="button"),{role:t,tabIndex:0,onClick:function(t){return e(t)},onKeyDown:function(t){if(t.keyCode===n.KeyCode.ENTER||t.keyCode===n.KeyCode.SPACE)return e(t)}}}}),function(){var e=function(e,n){function r(){this.constructor=e}for(var i in n)t.call(n,i)&&(e[i]=n[i]);return r.prototype=n.prototype,e.prototype=new r,e.__super__=n.prototype,e},t={}.hasOwnProperty,n=function(e,t){return function(){return e.apply(t,arguments)}};define("modules/clean/ajax",["jquery","external/underscore","modules/clean/devtools/perf_hub_actions","modules/clean/stormcrow/stormcrow_panel_actions","modules/clean/job_progress","modules/clean/storage","modules/clean/undo","modules/constants/ajax_strings","modules/constants/debug","modules/constants/request","modules/constants/page_load","modules/core/browser","modules/core/cookies","modules/core/exception","modules/core/html","modules/core/notify","modules/core/uri"],function(t,r,i,o,s,a,u,c,l,_,d,p,h,f,g,m,v){var w,y,b,E,x,A,S,T,O,C,k,F,L,D,R,B,I,P,M,N,q,j,U,H,W,G,J,Q,V,z,K,X,Y,Z,$,ee,te,ne,re,ie,oe,se,ae,ue,ce,le;return q=i.PerfHubActions,J="err:",Q="htmlerr:",G="async_task_started:",W="async_task_err:",H="done:",M="oref",V=function(e,n){var r,i,o,s,a;return null==e&&(e={}),null==n&&(n=[]),null==e.type&&(null!=e.method?(f.reportStack("Use of method property within modules/clean/ajax's Request",{tags:["module:ajax"]}),s=e.method):s="POST",e.type=s),r=new E(e),i=le(r,n),a=t.ajax({url:i.url(),type:e.type,data:i.data(),dataType:e.dataType||"text",headers:i.headers(),traditional:!0,xhrFields:i.xhrFields(),success:function(e,t,n){return i.success(e,t,n)},error:function(e,t,n){return i.error(e,t,n)},complete:function(e,t){return i.complete(e,t)},async:null==(o=e.async)||o,timeout:e.timeout}),i.request(a)},le=function(e,t){var n,i,o,s,a,u,c,l;for(i=[e],l=r(t.slice(0)).reverse(),o=0,u=l.length;o<u;o++)n=l[o],i.push(new n);for(a=null,s=0,c=i.length;s<c;s++)n=i[s],a&&(n.next=a),a=n;return a},E=(function(){function e(e){null==e&&(e={}),this.options=function(){return e},this.url=function(){return String(e.url||"")},this.data=function(){return e.data||{}},this.headers=function(){return e.headers||{}},this.xhrFields=function(){return e.xhrFields||{}},this.success=e.success||this.identity,this.error=e.error||this.identity,this.complete=e.complete||this.identity,this.request=this.identity}return e.prototype.identity=function(e){return e},e})(),T=(function(){function e(){}return e.prototype.options=function(){return this.next.options()},e.prototype.url=function(){return this.next.url()},e.prototype.data=function(){return this.next.data()},e.prototype.headers=function(){return this.next.headers()},e.prototype.xhrFields=function(){return this.next.xhrFields()},e.prototype.success=function(e,t,n){return this.next.success(e,t,n)},e.prototype.error=function(e,t,n){return this.next.error(e,t,n)},e.prototype.complete=function(e,t){return this.next.complete(e,t)},e.prototype.request=function(e){return this.next.request(e)},e})(),A=(function(n){function r(){return r.__super__.constructor.apply(this,arguments)}return e(r,n),r.prototype.SUPPORTED_TLDS=["dropbox.com"],r.prototype.data=function(){var e;return f.assert(this._is_db_domain(),"injecting CSRF token into request to non-dropbox domain"),e={is_xhr:!0},"get"!==(this.options().type||"post").toLowerCase()&&(e.t=h.read("__Host-js_csrf")||""),t.extend(e,this.next.data())},r.prototype._is_db_domain=function(){var e,t;return!(e=v.parse(String(this.url())).authority)||(t=e.split("."),this.SUPPORTED_TLDS.reduce(function(e,n){var r,i;return i=n.split("."),r=t.slice(-1*i.length).join("."),e||n===r},!1))},r})(T),ee=(function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.data=function(){var e,t;return e=this.next.data(),t=this.options(),t.subject_user&&!e._subject_uid&&(e._subject_uid=String(t.subject_user)),e},n.prototype.headers=function(){var e,t;return e=this.next.headers(),t=this.options(),t.subject_user&&(e["X-DROPBOX-UID"]=String(t.subject_user)),e},n})(T),x=(function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.error=function(e,t,n){var r,i;return 403===e.status&&(r=a.SessionStorage.get("reload-timestamp"),i=(new Date).getTime(),(!r||i-r>3e4)&&(a.SessionStorage.set("reload-timestamp",i),window.location.reload(!0))),this.next.error(e,t,n)},n})(T),D=(function(n){function r(){return r.__super__.constructor.apply(this,arguments)}return e(r,n),r.prototype.data=function(){var e;return e=this.next.data(),null!=t.ajaxSettings.restrict&&(e.restrict=t.ajaxSettings.restrict),e},r})(T),z=(function(n){function r(){return r.__super__.constructor.apply(this,arguments)}return e(r,n),r.prototype.data=function(){var e,n;return e=this.next.data(),_.REQUEST_TRACING_ENABLED&&"post"===this.options().type.toLowerCase()?(n={parent_request_id:_.REQUEST_ID},t.extend(n,e)):e},r})(T),U=(function(n){function r(){return r.__super__.constructor.apply(this,arguments)}return e(r,n),r.prototype.data=function(){var e,n;return e=this.next.data(),n={},d.PUBLIC_MODE_OVERRIDE&&(n.public_mode_override=1),d.COUNTRY_OVERRIDE&&(n.country_override=d.COUNTRY_OVERRIDE),t.extend(n,e)},r})(T),k=(function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.url=function(){var e,t;return t=this.next.url(),l.CPROFILE_ENABLED?(e=l.CPROFILE_PARAMETER,0!==e.indexOf("deps:")?v.parse(t).updateQuery({cProfile:e}).toString():t):t},n.prototype.success=function(e,t,n){return q.add_ajax_profile(n,this.url()),this.next.success(e,t,n)},n})(T),F=(function(n){function r(){return r.__super__.constructor.apply(this,arguments)}return e(r,n),r.prototype.data=function(){var e;return e=this.next.data(),l.STORMCROW_PANEL?t.extend({stormcrow_panel:1},e):e},r.prototype.complete=function(e,t){var n,r;return l.STORMCROW_PANEL&&(r=this.url(),n=e.getResponseHeader("X-Dropbox-Request-Id"),v.parse(r).getPath()!==o.FEATURES_USED_URL&&b({url:o.FEATURES_USED_URL,data:{request_id:n},success:function(e,t,i){return o.add_request_info({url:r,request_id:n,features_used:JSON.parse(e)})}})),this.next.complete(e,t)},r})(T),C=(function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.error=function(e,t,n){return this._notify_dev(e,t,n),this.next.error(e,t,n)},n.prototype._notify_dev=function(e,t,n){},n})(T),te=(function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.success=function(e,t,n){var r,i,o,s,a;if(!n.responseText.length)return this.next.error(n,t,"");if(o=!0,i=!1,0===n.responseText.indexOf(J))r=n.responseText.substr(J.length),"{"!==(s=r[0])&&"["!==s||(o=!1);else{if(0!==n.responseText.indexOf(Q))return this.next.success(e,t,n);r=n.responseText.substr(Q.length),i=!0}return a=this.next.error(n,t,r),o&&!this.options().skipNotifyError&&(i&&(r=new g(r)),m.error(r)),a},n.prototype.error=function(e,t,n){return"abort"!==t&&m.error(c.PROBLEM_COMPLETING_REQUEST),this.next.error(e,t,n)},n})(T),R=(function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.success=function(e,t,n){var r;if(!this.options().skipErrorHandling){if(!n.responseText.length)return this.next.error(n,t,"");if(0===n.responseText.indexOf(J))return r=n.responseText.substr(J.length),this.next.error(n,t,r)}return this.next.success(e,t,n)},n})(T),ne=(function(t){function r(){return this._clear_working_msg=n(this._clear_working_msg,this),r.__super__.constructor.apply(this,arguments)}return e(r,t),r.prototype.request=function(e){return this.xhr=e,setTimeout((function(e){return function(){if(!e._request_finished())return e._should_show_working_msg()?(e._show_working_msg(),e.xhr.done(e._clear_working_msg)):void 0}})(this),4e3),this.next.request(this.xhr)},r.prototype._request_finished=function(){return 4===this.xhr.readyState},r.prototype._should_show_working_msg=function(){return m.isShown()&&m.current()!==u.undo_notification},r.prototype._show_working_msg=function(){return this.notification=m.success(c.STILL_WORKING)},r.prototype._clear_working_msg=function(){if(m.isShown()&&this.notification===m.current())return m.clear()},r})(T),j=(function(r){function i(){return this._watch=n(this._watch,this),i.__super__.constructor.apply(this,arguments)}return e(i,r),i.prototype.data=function(){var e,n;return this.job_id=i.generate_job_id(),e=this.next.data(),this.uid=e._subject_uid,n=this.options().subject_user,!this.uid&&n&&(this.uid=String(n)),t.extend({job_id:this.job_id},e)},i.prototype.request=function(e){return this._interval=1e3,this._failures=0,this._watch_count=0,this._watch_id=setInterval(this._watch,this._interval),this.next.request(e)},i.prototype.success=function(e,t,n){return this.next.success(e,t,n)},i.prototype.error=function(e,t,n){return this.next.error(e,t,n)},i.prototype.complete=function(e,t){return this._stop(),s.Job.handled(this.job_id),this.next.complete(e,t)},i.prototype._watch=function(){return s.Job.peek(this.job_id)?this._stop():(this._watch_count++,this._watch_count%10===0&&(clearInterval(this._watch_id),this._interval=Math.min(Math.floor(1.5*this._interval),3e4),this._watch_id=setInterval(this._watch,this._interval)),this._show_progress_modal(),this._fetch_progress())},i.prototype._stop=function(){return clearInterval(this._watch_id),s.ModalProgress.hide()},i.prototype._show_progress_modal=function(){if(!this._modal_shown)return this._modal_shown=!0,s.ModalProgress.show(this.options().progress_text)},i.prototype._fetch_progress=function(){var e;return e={},this.uid&&(e._subject_uid=this.uid),b({url:"/job_status/"+this.job_id,data:e,success:function(e,t,n){var r;return r=0===n.responseText.indexOf("done")?"1/1":n.responseText,s.ModalProgress.update(r)},error:(function(e){return function(t,n,r){if(e._failures++,!(e._failures<3))return e._stop(),e.next.error(t,n,r)}})(this)})},i.generate_job_id=function(){var e,t,n;return e=new Date,n=e.getTime().toString(),t=Math.floor(1e6*Math.random()).toString(),t=("000000"+t).substring(t.length),n+t},i})(T),y=(function(t){function r(){return this._watch=n(this._watch,this),r.__super__.constructor.apply(this,arguments)}return e(r,t),r.prototype.data=function(){var e,t;return e=this.next.data(),this.uid=e._subject_uid,t=this.options().subject_user,!this.uid&&t&&(this.uid=String(t)),e},r.prototype.success=function(e,t,n){return this._is_async_job_response(n)?(this.job_id=n.responseText.split(":")[1],this._interval=1e3,this._failures=0,this._watch_count=0,this._watch_id=setInterval(this._watch,this._interval)):this.next.success(e,t,n)},r.prototype.complete=function(e,t){if(!this._is_async_job_response(e))return this.next.complete(e,t)},r.prototype._is_async_job_response=function(e){var t,n;return 0===(null!=(n=e.responseText)?n.indexOf(G):void 0)&&(t=e.responseText.split(":")[1],t.match(/^[A-Za-z0-9_\-=]*$/))},r.prototype._watch=function(){return s.Job.peek(this.job_id)?this._stop():(this._watch_count++,this._watch_count%10===0&&(clearInterval(this._watch_id),this._interval=Math.min(Math.floor(1.5*this._interval),3e4),this._watch_id=setInterval(this._watch,this._interval)),this._show_progress_modal(),this._fetch_progress())},r.prototype._stop=function(){return clearInterval(this._watch_id),s.ModalProgress.hide()},r.prototype._show_progress_modal=function(){if(!this._modal_shown)return this._modal_shown=!0,s.ModalProgress.show(this.options().progress_text)},r.prototype._fetch_progress=function(){var e;return e={},this.uid&&(e._subject_uid=this.uid),Z({url:"/async_task_status/"+this.job_id,data:e,success:(function(e){return function(t,n,r){var i,o,a;return a=r.responseText,0===a.indexOf(H)?(s.Job.handled(e.job_id),e._stop(),a=a.substr(H.length),r.responseText=a,e.next.success(a,n,r),e.next.complete(r,n)):0===a.indexOf(J)?(s.Job.handled(e.job_id),e._stop(),i=a.substr(J.length),m.error(i),e.next.error(r,n,i),e.next.complete(r,n)):0===a.indexOf(W)?(s.Job.handled(e.job_id),e._stop(),o=a.substr(W.length),m.error(new g(o)),e.next.complete(r,n)):s.ModalProgress.update(a)}})(this),error:(function(e){return function(t,n,r){if(e._failures++,!(e._failures<3))return e._stop(),e.next.error(t,n,r),e.next.complete(t,n)}})(this)})},r})(T),N=(function(n){function r(){return r.__super__.constructor.apply(this,arguments)}return e(r,n),r.prototype.data=function(){var e,n;return e=p.get_uri().getQuery()[M],!(null!=(n=this.next.data())?n.oref:void 0)&&e?t.extend({oref:e},this.next.data()):this.next.data()},r})(T),S=(function(r){function i(){this.browser_unload_handler=n(this.browser_unload_handler,this),i.__super__.constructor.apply(this,arguments),this.is_browser_unloading=!1}return e(i,r),i.prototype.browser_unload_handler=function(){this.is_browser_unloading=!0},i.prototype.request=function(e){var n;return t(window).on("beforeunload",this.browser_unload_handler),(n=this.next).request.apply(n,arguments)},i.prototype.error=function(e,t,n){var r,i,o;return r=0===e.status&&0===e.readyState&&"error"===t&&!n,i=r&&this.is_browser_unloading,i?this.next.error(e,"abort","unload"):(o=this.next).error.apply(o,arguments)},i.prototype.complete=function(){var e;return t(window).off("beforeunload",this.browser_unload_handler),(e=this.next).complete.apply(e,arguments)},i})(T),ce=[S],w=[ee,A,x,D],P=[ne],O=[C,k,F,z,U],I=[y],ie=[].concat(ce,P,te,O,w,I),ae=function(e){return null==e&&(e={}),V(e,ie)},ue=function(e){return null==e&&(e={}),V(e,[].concat(N,ie))},L=[].concat(ce,P,R,O,w,I),B=function(e){return null==e&&(e={}),V(e,L)},oe=[].concat(ce,P,te,O,w,j,I),se=function(e){return null==e&&(e={}),V(e,oe)},b=function(e){return null==e&&(e={}),V(e,[].concat(ce,O,w))},K=[ee,A,D],X=[].concat(ce,O,K),Z=function(e){return null==e&&(e={}),V(e,X)},$=function(e){return null==e&&(e={}),V(e,[].concat(N,X))},re=function(e){var n,r,i;return null==e&&(e={}),n=new E(e),r=le(n,w),i=t.ajax({url:r.url(),type:"OPTIONS",data:r.data(),success:function(e,t,n){return r.success(e,t,n)},error:function(e,t,n){return r.error(e,t,n)},complete:function(e,t){return r.complete(e,t)}}),r.request(i)},Y=function(e){var t,n,r,i,o,s,a,u;if(null==e&&(e={}),delete e.success,delete e.error,delete e.complete,null==navigator.sendBeacon)return Z(e);null==e.type&&(e.type="POST"),t=new E(e),n=le(t,[].concat(K,z)),a=n.url(),r=new FormData,o=n.data();for(i in o)u=o[i],null!=u&&""!==u&&r.append(i,u);return s=navigator.sendBeacon(a,r),s?void 0:console.warn("Beacon request failed: "+a)},{Request:V,BackgroundRequest:b,SilentBackgroundRequest:Z,SilentBackgroundRequestOref:$,WebRequest:ae,WebRequestOref:ue,FormWebRequest:B,WebProgressRequest:se,ValidationSchemaRequest:re,SilentBackgroundBeaconRequest:Y}})}.call(this),define("modules/clean/ajax_as_promised",["require","exports","modules/clean/ajax"],function(e,t,n){"use strict";function r(e){return function(t){return new Promise(function(n,r){return e(t).then(n,function(e,t,n){return r({jqXHR:e,textStatus:t,errorThrown:n})})})}}Object.defineProperty(t,"__esModule",{value:!0}),t.Request=r(n.Request),t.BackgroundRequest=r(n.BackgroundRequest),t.SilentBackgroundRequest=r(n.SilentBackgroundRequest),t.SilentBackgroundRequestOref=r(n.SilentBackgroundRequestOref),t.WebRequest=r(n.WebRequest),t.WebRequestOref=r(n.WebRequestOref),t.FormWebRequest=r(n.FormWebRequest),t.WebProgressRequest=r(n.WebProgressRequest),t.ValidationSchemaRequest=r(n.ValidationSchemaRequest),t.SilentBackgroundBeaconRequest=r(n.SilentBackgroundBeaconRequest)}),define("modules/clean/analytics",["require","exports","tslib","jquery","modules/clean/ajax","modules/clean/viewer"],function(e,t,n,r,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=function(e){var t=o.get_viewer();return e?[e]:t.get_users().map(function(e){return e.id})};t.BrowseActionsContextMenuLogger={log:function(e,t){for(var n=0,r=0,o=e;r<o.length;r++){o[r].is_dir&&n++}var s=e.length-n;i.SilentBackgroundRequest({url:"/browse_actions_context_menu_logger",data:{file_count:s,folder_count:n,action:t}})}},t.ContentManagerActionsLogger={log:function(e,t){i.SilentBackgroundRequest({url:"/content_manager_actions_logger",data:{ns_id:e,action:t}})}},t.UXAnalyticsLogger={log:function(e,t){i.SilentBackgroundRequest({url:"/log/ux_analytics",data:{event_type:e,extra_params:JSON.stringify(t)}})}},t.ProEventsLogger={log:function(e,t){i.SilentBackgroundRequest({url:"/log/pro_events",data:{event:e,extra:JSON.stringify(t)}})}},t.FileViewLogger={start_time:0,start:function(e){t.FileViewLogger.start_time||(t.FileViewLogger.start_time=e||Date.now())},stop:function(e){t.FileViewLogger.start_time?e.extra.time_taken=Date.now()-t.FileViewLogger.start_time:e.extra.time_taken=0,t.FileViewLogger.log(e),t.FileViewLogger.start_time=0},log:function(e){i.SilentBackgroundRequest({url:"/log/file_view",data:{viewing_user_ids:JSON.stringify(s(e.user_id)),target:e.target,platform:e.platform,origin:e.origin||null,action:e.action||null,ns_id:e.ns_id,sjid:e.sjid,ns_path:e.ns_path,shared_link_url:e.shared_link_url||null,extra:JSON.stringify(e.extra)}})}},t.LinkfileActivityLogger={log:function(e,t,n,r,o,s){i.SilentBackgroundRequest({url:"/linkfile_activity_log",data:{event_name:e,file_ext:t,link_domain:n,success:r,source:o,extra:JSON.stringify(s)}})}},t.PreviewActivityLogger={start_times:{},start:function(e,n){t.PreviewActivityLogger.start_times[e]=n||Date.now()},stop:function(e,n){null!=t.PreviewActivityLogger.start_times[e]&&(n.total_time=Date.now()-t.PreviewActivityLogger.start_times[e],t.PreviewActivityLogger.log(e,n),delete t.PreviewActivityLogger.start_times[e])},log:function(e,t){i.SilentBackgroundRequest({url:"/preview_activity_log",data:{event_name:e,input_method:t.input_method,file_ext:t.file_ext,extra:t.extra}})}},t.MobileFilePreviewLogger={log:function(e,t,n,r,o,s){i.SilentBackgroundRequest({url:"/log/mobile_file_preview",data:{client_time:+new Date,event_name:e,file_viewer_session_id:t,file_preview_session_id:n,file_ns_id:r,file_sjid:o,extra:JSON.stringify(s)}})}},t.SearchClientActivityLogger={create_completion_log_dict:function(e,t,n,r,i,o,s,a){return null!=t&&(e.used_spellcorrect=t),null!=n&&(e.request_id=n),null!=r&&(e.latency=(new Date).getTime()-r),null!=i&&(e.query_string=i),null!=o&&(e.result_count=o),null!=s&&"200"!==s&&(e.failure_type=s),null!=a&&(e.search_session_id=a),e},log:function(e,t,r){i.SilentBackgroundRequest({url:"/searchclientlogger",subject_user:t,data:n.__assign({event_name:e,typeahead_session_id:r.search_session_id},r)})}},t.SharedFolderActivityLogger={flow_id:null,log:function(e,n,r,o,s){if(s||null===t.SharedFolderActivityLogger.flow_id){var a=new Date,u=a.getTime().toString()+Math.random().toString();t.SharedFolderActivityLogger.flow_id=u.replace(".","")}i.SilentBackgroundRequest({url:"/sflogger",data:{platform:e,event_name:n,extra:JSON.stringify(o),active_uid:null!=r?r.id:null,flow_id:t.SharedFolderActivityLogger.flow_id}})}},t.ShareTibEventLogger={log:function(e,t,n,r){i.SilentBackgroundRequest({url:"/share_tib_log",data:{event:t,origin:n,extra:JSON.stringify(r)},subject_user:e})},log_unauth:function(e,t,n){i.SilentBackgroundRequest({url:"/share_tib_log_unauth",data:{event:e,origin:t,extra:JSON.stringify(n)}})}},t.SharingExperimentsLogger={log:function(e,t,n){void 0===n&&(n={}),i.SilentBackgroundRequest({url:"/log/sharing_experiments",data:{action_type:t,action_extras:JSON.stringify(n)},subject_user:e})}},t.ShmodelUILogger={TARGET_ITEMS:{FOLDER_IS_SF:"folder-is-sf",FOLDER_CAN_SF:"folder-can-sf",FOLDER_NO_SF:"folder-no-sf",FILE:"file"},log:function(e,t,n){i.SilentBackgroundRequest({url:"/shmuilog",data:{evt:e,origin:t,target_item:n}})}},t.TeamsWebActionsLogger={LOG_CATEGORY:{PROMO_TEAMS:"promo_teams",TEAM_INFO:"team_info",UPGRADE:"upgrade_to_dfb",USAGE_INFO:"usage_info",LIMITED_TEAM_INFO_DETAILED:"limited_team_info_detailed",TEAM_AND_USER_INFO:"team_and_user_info"},log:function(e,t,n,r,o,a){var u=s(r);i.SilentBackgroundRequest({url:"/teamswalogger",data:{event_name:e,extra:JSON.stringify(t),for_uids:JSON.stringify(u),log_category:a,restricted:o?"1":void 0},success:n?n:void 0,error:n?n:void 0})},log_for_category:function(e,n,r){t.TeamsWebActionsLogger.log(e,r,void 0,void 0,!1,n)},registerToLogClickEvent:function(e,n,i){r(e).click(function(){t.TeamsWebActionsLogger.log(n,void 0,void 0,void 0,!1,i)})}},t.UserActivityLogger={start_times:{},start:function(e,n,r){t.UserActivityLogger.start_times[n]=r||Date.now()},stop:function(e,n,r,i){null!=t.UserActivityLogger.start_times[n]&&(r.total_time=Date.now()-t.UserActivityLogger.start_times[n],t.UserActivityLogger.log(e,n,r,i),delete t.UserActivityLogger.start_times[n])},log:function(e,t,n,r){n=n||{};var o=s(r);i.SilentBackgroundRequest({url:"/ualogger",data:{platform:e,event_name:t,extra:JSON.stringify(n),for_uids:JSON.stringify(o)}})}},t.ViralLogger={log:function(e,t,n,r){i.SilentBackgroundRequest({url:"/virallogger",data:{user_ids:JSON.stringify(e),viral_type:t,action:n,extra:JSON.stringify(r||{})}})}},t.WebMiscActivityLogger={log:function(e,t,n){var r=s(n);i.SilentBackgroundRequest({url:"/misclogger",data:{event_name:e,extra:JSON.stringify(t),for_uids:JSON.stringify(r)}})}},t.SupportExperimentsWebLogger={_log:function(e,t){i.SilentBackgroundRequest({url:"/support_experiments_log",data:{event_name:e,extra:JSON.stringify(t)}})},log_file_restore:function(e){t.SupportExperimentsWebLogger._log("file_restore",{ref:e})}};var a=(function(){function e(e,t){void 0===e&&(e=null),this.context=e,this.search_mode=t,this._clear_buffers()}return e.prototype._clear_buffers=function(){this.selection_buffer=[],this.timing_buffer=[],this.total_searches=0,this.slow_searches=0,this.downloaded_contacts=null,this.downloading_time=null},e.prototype.add_record=function(e){e.deleted=!1,this.selection_buffer.push(e)},e.prototype.flag_record_as_removed=function(e){for(var t=0,n=this.selection_buffer;t<n.length;t++){var r=n[t];if(r.contact_id===e&&!r.deleted)return void(r.deleted=!0)}},e.prototype.add_timing_record=function(e){this.timing_buffer.push(e)},e.prototype.count_search=function(e){this.total_searches+=1,e&&(this.slow_searches+=1)},e.prototype.add_downloading_stats=function(e){e&&(this.downloading_time=e.downloading_time,this.downloaded_contacts=e.num_contacts)},e.prototype.log_records=function(e,t,n){void 0===n&&(n=0);var r={events:JSON.stringify(this.selection_buffer),canceled:t};if(this.total_searches||this.timing_buffer.length){var o={context:this.context,search_mode:this.search_mode,total_searches:this.total_searches,slow_searches:this.slow_searches,downloading_time:this.downloading_time,downloaded_contacts:this.downloaded_contacts};r.total_contacts=n,r.timing_events=JSON.stringify(this.timing_buffer),r.session_summary=JSON.stringify(o)}i.SilentBackgroundRequest({url:"/contact_search_log",subject_user:e,data:r}),this._clear_buffers()},e})();t.ContactSearchLogger=a,t.CommentsVortexLogger={log:function(e){i.SilentBackgroundRequest({url:"/comments_vortex_log",data:{event_name:e}})}},t.LegacySharingVortexLogger={log:function(e){i.SilentBackgroundRequest({url:"/legacy_sharing_vortex_log",data:{event_name:e}})}}}),define("modules/clean/css",["require","exports","modules/clean/static_urls","modules/core/exception","modules/core/uri"],function(e,t,n,r,i){"use strict";function o(){for(var e=document.querySelectorAll('link[rel="stylesheet"]'),t=0;t<e.length;t++){var n=e[t],r=i.parse(n.href).getPath();l[r]=Promise.resolve(),_[r]=!0}}function s(e){return'url("'+String(e).replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'")'}function a(e,t,i){r.assert(e.startsWith("/static/css/"),"invalid static css path: "+e);var o=l[e];return o||(o=new Promise(function(t,r){var i=document.createElement("link");return i.href=n.static_url(e),i.rel="stylesheet",i.type="text/css",i.crossorigin="anonymous",i.onload=function(){return _[e]=!0,t()},i.onerror=r,document.head.appendChild(i)}),l[e]=o),o.then(t,i)}function u(e,t,n){var r=e.map(function(e){return a(e)});return Promise.all(r).then(t,n)}function c(e){return!!e.every(function(e){return r.assert(e.startsWith("/static/css/"),"invalid static css path: "+e),!!_[e]})||(o(),e.every(function(e){return!!_[e]}))}Object.defineProperty(t,"__esModule",{value:!0});var l=Object.create(null),_=Object.create(null);o(),t.css_url=s,t.require_css=a,t.require_css_multi=u,t.is_loaded=c}),function(){define("modules/clean/dbmodal_stack",["jquery"],function(e){var t;return t=(function(){function t(){}return t.__stack=[],t.CLEAR="dbmodal:clear",t.pop=function(n){var r;return null==n&&(n=null),null!=n?t.remove(n):n=t.__stack.pop(),null!=n&&n._hide(),r=t.top(),null!=r?r._show():e(document).trigger(t.CLEAR)},t.push=function(e){var n;return t.remove(e),n=t.top(),(null!=n?n.visible:void 0)&&n._hide(),t.__stack.push(e),e._show()},t.top=function(){var e;return e=t.__stack.length,e?t.__stack[e-1]:null},t.remove=function(e){var n,r,i,o,s;for(o=[],s=t.__stack,n=0,r=s.length;n<r;n++)i=s[n],i!==e&&o.push(i);t.__stack=o},t.clear=function(){var n,r,i;for(n=r=t.__stack.length-1;r>=0;n=r+=-1)i=t.__stack[n],i.visible&&i._hide();return e(document).trigger(t.CLEAR),t.__stack=[]},t.register=function(n,r){return e(document).on(n,r),e(document).on(t.CLEAR,function(){return e(document).off(n,r)})},t.unregister=function(t,n){return e(document).off(t,n)},t.trigger=function(t,n){return e(document).trigger(t,n)},t})(),{DBModalStack:t}})}.call(this),define("modules/clean/devtools/perf_hub_action_types",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActionTypes={PROFILED_AJAX_LOAD_FINISHED:"PROFILED_AJAX_LOAD_FINISHED",WEB_TIMING_FETCHED:"WEB_TIMING_FETCHED"}}),define("modules/clean/devtools/perf_hub_actions",["require","exports","modules/clean/devtools/perf_hub_action_types","modules/clean/flux/dispatcher"],function(e,t,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=(function(){function e(){}return e.prototype.add_ajax_profile=function(e,t){return r.dispatch({type:n.ActionTypes.PROFILED_AJAX_LOAD_FINISHED,data:{xhr:e,url:t}})},e.prototype.add_web_timing_details=function(e){return r.dispatch({type:n.ActionTypes.WEB_TIMING_FETCHED,data:e})},e})();t.PerfHubActions=new i}),function(){define("modules/clean/em_string",[],function(){return(function(){function e(t){if(!(this instanceof e))return new e(t);this.s=t,this.info=this.widthInfo(),this.length=t.length?this.info[this.s.length-1]:0}return e.em_snippet=function(t,n,r){return null==n&&(n=50),null==r&&(r=.75),new e(t.toString()).snippet(n,r).toString()},e.prototype.widthInfo=function(){var e,t,n,r;for(n={},n[-1]=0,e=t=0,r=this.s.length;0<=r?t<r:t>r;e=0<=r?++t:--t)n[e]=n[e-1]+this.ems(this.s.charAt(e));return n},e.prototype.findSpot=function(e){var t,n,r,i;if(!e)return 0;for(i=0,n=this.s.length;i<=n;)if(r=Math.floor(i/2+n/2),t=this.info[r-1],t>e)n=r-1;else{if(!(t<e))return r;i=r+1}return i>r?i:r},e.prototype.ems=function(t){var n,r,i,o,s;return r=.65,n=1.08,i=.58,o=t.charCodeAt(0),s=e.CODEPOINT_TO_WIDTH[o],s?s/Math.pow(10,e.ACCURACY):768<=o&&o<=879?0:65377<=o&&o<=65500?i:11904<=o&&o<=40911||44032<=o&&o<=55215||4352<=o&&o<=4607||63744<=o&&o<=64255||65280<=o&&o<=65535||131072<=o&&o<=196607?n:r},e.prototype.substr=function(t,n){var r,i;return i=this.findSpot(t),null!=n?(r=this.findSpot(t+n),new e(this.s.substr(i,r-i))):new e(this.s.substr(i))},e.prototype.toString=function(){return this.s},e.prototype.snippet=function(t,n){var r,i,o,s,a;return null==t&&(t=50),null==n&&(n=.75),this.length<=t?this:(t-=e._ELLIPSIS_LENGTH,r=t*n,s=t-r,a=this.length-s,o=this.substr(0,r),i=this.substr(a),new e(o.toString()+"…"+i.toString()))},e.ACCURACY=2,e.CODEPOINT_TO_WIDTH={32:38,33:25,34:42,35:67,36:58,37:92,38:75,39:25,40:33,41:33,42:58,43:58,44:25,45:33,46:25,47:42,48:58,49:58,50:58,51:58,52:58,53:58,54:58,55:58,56:58,57:58,58:25,59:25,60:58,61:58,62:58,63:50,64:100,65:67,66:67,67:67,68:75,69:58,70:58,71:75,72:83,73:33,74:25,75:67,76:58,77:100,78:83,79:83,80:67,81:83,82:67,83:58,84:58,85:75,86:67,87:100,88:67,89:58,90:58,91:33,92:42,93:33,94:58,95:50,96:67,97:58,98:67,99:50,100:67,101:58,102:33,103:58,104:67,105:25,106:25,107:58,108:25,109:100,110:67,111:67,112:67,113:67,114:42,115:50,116:42,117:67,118:58,119:83,120:58,121:58,122:50,123:42,124:58,125:42,126:58,161:25,162:58,163:58,164:58,165:58,166:58,167:58,168:67,169:92,170:42,171:50,172:58,174:92,175:58,176:50,177:58,178:42,179:42,180:67,181:67,182:75,183:25,184:25,185:42,186:42,187:50,188:83,189:83,190:83,191:50,192:67,193:67,194:67,195:67,196:67,197:67,198:92,199:67,200:58,201:58,202:58,203:58,204:33,205:33,206:33,207:33,208:75,209:83,210:83,211:83,212:83,213:83,214:83,215:58,216:83,217:75,218:75,219:75,220:75,221:58,222:67,223:67,224:58,225:58,226:58,227:58,228:58,229:58,230:92,231:50,232:58,233:58,234:58,235:58,236:25,237:25,238:25,239:25,240:67,241:67,242:67,243:67,244:67,245:67,246:67,247:58,
248:67,249:67,250:67,251:67,252:67,253:58,254:67,255:58,256:75,257:67,258:75,259:67,260:75,261:67,262:75,263:58,264:75,265:58,266:75,267:58,268:75,269:58,270:83,271:83,272:83,273:75,274:67,275:67,276:67,277:67,278:67,279:67,280:67,281:67,282:67,283:67,284:83,285:75,286:83,287:75,288:83,289:75,290:83,291:75,292:83,293:75,294:92,295:75,296:33,297:33,298:33,299:33,300:33,301:33,302:33,303:33,304:33,305:25,306:67,307:67,308:42,309:33,310:75,311:67,312:67,313:58,314:33,315:58,316:33,317:58,318:42,319:58,320:50,321:67,322:42,323:83,324:75,325:83,326:75,327:83,328:75,329:83,330:83,331:75,332:92,333:67,334:92,335:67,336:92,337:67,338:100,339:100,340:75,341:50,342:75,343:50,344:75,345:50,346:67,347:58,348:67,349:58,350:67,351:58,352:67,353:58,354:75,355:42,356:75,357:42,358:75,359:42,360:83,361:75,362:83,363:75,364:83,365:75,366:83,367:75,368:83,369:75,370:83,371:75,372:100,373:92,374:75,375:58,376:75,377:67,378:67,379:67,380:67,381:67,382:67,383:42,384:75,385:83,386:67,387:75,388:75,389:67,390:75,391:83,392:58,393:83,394:100,395:67,396:75,397:67,398:67,399:75,400:58,401:58,402:75,403:83,404:75,405:100,406:50,407:50,408:75,409:67,410:50,411:67,412:117,413:83,414:75,415:92,416:92,417:75,418:117,419:100,420:75,421:75,422:75,423:67,424:58,425:67,426:58,427:42,428:75,429:42,430:75,431:83,432:75,433:92,434:83,435:75,436:75,437:67,438:67,439:67,440:67,441:58,442:58,443:75,444:75,445:58,446:50,447:67,448:33,449:50,450:50,451:33,452:142,453:142,454:133,455:100,456:92,457:67,458:117,459:117,460:100,461:75,462:67,463:33,464:33,465:92,466:67,467:83,468:75,469:83,470:75,471:83,472:75,473:83,474:75,475:83,476:75,477:67,478:75,479:67,480:75,481:67,482:100,483:100,484:92,485:75,486:83,487:75,488:75,489:67,490:92,491:67,492:92,493:67,494:67,495:58,496:33,497:142,498:142,499:133,500:83,501:75,502:117,503:67,504:83,505:75,506:75,507:67,508:100,509:100,510:92,511:67,512:75,513:67,514:75,515:67,516:67,517:67,518:67,519:67,520:33,521:33,522:33,523:33,524:92,525:67,526:92,527:67,528:75,529:50,530:75,531:50,532:83,533:75,534:83,535:75,536:67,537:58,538:75,539:42,540:58,541:58,542:83,543:75,544:83,545:100,546:92,547:67,548:67,549:67,550:75,551:67,552:67,553:67,554:92,555:67,556:92,557:67,558:92,559:67,560:92,561:67,562:75,563:58,564:67,565:100,566:67,567:33,568:100,569:100,570:75,571:75,572:58,573:58,574:67,575:58,576:58,577:67,578:50,579:75,580:75,581:75,582:75,583:58,584:58,585:25,586:83,587:58,588:75,589:33,590:75,591:58,880:67,881:50,882:67,883:50,884:33,885:33,886:75,887:67,888:108,889:108,890:67,891:58,892:58,893:58,894:42,895:108,896:108,897:108,898:108,899:108,900:67,901:67,902:75,903:42,904:83,905:100,906:58,907:108,908:100,909:108,910:100,911:100,912:42,913:75,914:67,915:58,916:83,917:67,918:67,919:83,920:92,921:33,922:75,923:75,924:100,925:83,926:75,927:92,928:83,929:67,930:108,931:67,932:75,933:75,934:83,935:75,936:83,937:92,938:33,939:75,940:83,941:58,942:75,943:42,944:67,945:83,946:67,947:67,948:67,949:58,950:75,951:75,952:67,953:42,954:67,955:67,956:75,957:67,958:67,959:67,960:92,961:67,962:67,963:75,964:67,965:67,966:92,967:67,968:92,969:100,970:42,971:67,972:67,973:67,974:100,975:108,976:58,977:75,978:75,979:100,980:75,981:92,982:100,983:67,984:92,985:67,986:75,987:58,988:58,989:58,990:67,991:58,992:75,993:92,994:100,995:92,996:75,997:58,998:75,999:58,1e3:75,1001:75,1002:67,1003:67,1004:83,1005:58,1006:50,1007:42,1008:67,1009:67,1010:58,1011:33,1012:92,1013:58,1014:58,1015:67,1016:67,1017:75,1018:100,1019:83,1020:58,1021:75,1022:75,1023:75,1024:67,1025:67,1026:92,1027:58,1028:75,1029:67,1030:33,1031:33,1032:42,1033:108,1034:108,1035:83,1036:75,1037:83,1038:75,1039:83,1040:75,1041:67,1042:67,1043:58,1044:83,1045:67,1046:92,1047:67,1048:83,1049:83,1050:75,1051:83,1052:100,1053:83,1054:92,1055:83,1056:67,1057:75,1058:75,1059:75,1060:83,1061:75,1062:83,1063:75,1064:108,1065:108,1066:75,1067:92,1068:67,1069:75,1070:108,1071:75,1072:67,1073:67,1074:58,1075:58,1076:75,1077:67,1078:83,1079:58,1080:75,1081:75,1082:67,1083:67,1084:83,1085:75,1086:67,1087:75,1088:75,1089:58,1090:58,1091:58,1092:92,1093:67,1094:75,1095:58,1096:92,1097:100,1098:67,1099:83,1100:58,1101:58,1102:92,1103:58,1104:67,1105:67,1106:75,1107:58,1108:58,1109:58,1110:33,1111:33,1112:42,1113:92,1114:92,1115:75,1116:67,1117:75,1118:58,1119:75,1120:100,1121:75,1122:75,1123:67,1124:83,1125:83,1126:75,1127:67,1128:100,1129:92,1130:92,1131:83,1132:117,1133:108,1134:67,1135:67,1136:83,1137:83,1138:92,1139:67,1140:83,1141:67,1142:83,1143:67,1144:133,1145:125,1146:92,1147:67,1148:100,1149:75,1150:100,1151:75,1152:75,1153:58,1154:75,1155:0,1156:0,1157:0,1158:0,1159:108,1160:0,1161:0,1162:83,1163:75,1164:67,1165:58,1166:67,1167:75,1168:58,1169:58,1170:67,1171:58,1172:75,1173:67,1174:100,1175:92,1176:67,1177:58,1178:75,1179:67,1180:83,1181:75,1182:75,1183:67,1184:83,1185:75,1186:83,1187:75,1188:100,1189:83,1190:117,1191:100,1192:92,1193:75,1194:75,1195:58,1196:75,1197:58,1198:75,1199:58,1200:75,1201:58,1202:75,1203:75,1204:100,1205:83,1206:75,1207:67,1208:75,1209:67,1210:75,1211:58,1212:92,1213:75,1214:92,1215:75,1216:33,1217:92,1218:83,1219:75,1220:67,1221:83,1222:67,1223:83,1224:75,1225:83,1226:75,1227:75,1228:58,1229:100,1230:83,1231:25,1232:75,1233:67,1234:75,1235:67,1236:100,1237:100,1238:67,1239:67,1240:75,1241:67,1242:75,1243:67,1244:92,1245:83,1246:67,1247:58,1248:67,1249:58,1250:83,1251:75,1252:83,1253:75,1254:92,1255:67,1256:92,1257:67,1258:92,1259:67,1260:75,1261:58,1262:75,1263:58,1264:75,1265:58,1266:75,1267:58,1268:75,1269:58,1270:58,1271:42,1272:92,1273:83,1274:58,1275:42,1276:75,1277:58,1278:75,1279:58,2026:67,19977:108,65403:58},e._ELLIPSIS_LENGTH=new e("…").length,e})()})}.call(this),define("modules/clean/event_handler",["require","exports","jquery"],function(e,t,n){"use strict";function r(e){var n=e.prototype.componentWillMount,r=e.prototype.componentWillUnmount;e.prototype.componentWillMount=function(){t.EventHandlerMixin.componentWillMount.apply(this),n&&"function"==typeof n&&n.apply(this)},e.prototype.componentWillUnmount=function(){r&&"function"==typeof r&&r.apply(this),t.EventHandlerMixin.componentWillUnmount.apply(this)}}Object.defineProperty(t,"__esModule",{value:!0}),t.eventHandler=r,t.EventHandlerMixin={componentWillMount:function(){this.events=new i},componentWillUnmount:function(){this.events.removeAll()}};var i=(function(){function e(){}return e.prototype.on=function(e,t,r,i,o){"string"!=typeof r&&(o=i,i=r,r=void 0),o&&(i=n.proxy(i,o)),this.handlers||(this.handlers=[]),e=n(e),r?e.on(t,r,i):e.on(t,i),this.handlers.push({element:e,event:t,selector:r,callback:i})},e.prototype.removeAll=function(){this.handlers&&(this.handlers.forEach(function(e){e.selector?e.element.off(e.event,e.selector,e.callback):e.element.off(e.event,e.callback)}),this.handlers=null)},e})();t.EventHandler=i}),function(){define("modules/clean/event_load",[],function(){var e,t;return e=function(e){return window.setTimeout(function(){return e.apply(e)},0)},t=function(t){return"complete"===document.readyState?e(t):null!=window.attachEvent?window.attachEvent("onload",t):null!=window.addEventListener?window.addEventListener("load",t,!1):void 0},{window_load:t}})}.call(this),define("modules/clean/filepath",["require","exports"],function(e,t){"use strict";function n(e){return e?("/"!==e.charAt(0)&&(e="/"+e),"/"===e.charAt(e.length-1)?e.substr(0,e.length-1):e):""}function r(e,t){return n(e).toLowerCase()===n(t).toLowerCase()}function i(e){if(!e.length)return!1;var t=d(e[0]);return!e.find(function(e){return d(e)!==t})}function o(e,t){e=n(e);var r=e.split("/"),i=r.pop();return i?i:t||"Dropbox"}function s(e){return e.indexOf(".")===-1?e:e.split(".").slice(0,-1).join(".")}function a(e){var t=e.split("."),n=e.length>0&&"."===e[0],r=e.indexOf(".")<0;n&&(r=t.length<=2);var i=t.pop();return i&&!r?i.toLowerCase():""}function u(e){return e.indexOf(".")===-1?"":a(e).toLowerCase()}function c(e,n){switch(void 0===n&&(n=t.ICON_SIZES.SMALL),n){case t.ICON_SIZES.LARGE:return e+"_32";case t.ICON_SIZES.XLARGE:return e+"_64";default:return e}}function l(e,t){var n=(void 0===t?{}:t).size;return c(f[e]||"page_white",n)}function _(e,t){var n=(void 0===t?{}:t).size;return l(a(e).toLowerCase(),{size:n})}function d(e){return e.split("/").slice(0,-1).join("/")||"/"}function p(e){return"s_web_"+h({isInTeamFolderTree:e})}function h(e){var n=void 0===e?{}:e,r=n.isShared,i=void 0!==r&&r,o=n.isDeleted,s=void 0!==o&&o,a=n.isTeamFolder,u=void 0!==a&&a,l=n.isInTeamFolderTree,_=void 0!==l&&l,d=n.isViewOnly,p=void 0!==d&&d,h=n.size,f=void 0===h?t.ICON_SIZES.LARGE:h,g="";u?g="_team":(i||_)&&(g="_user");var m="";p&&""!==g&&(m="_locked");var v="";return s&&(v="_gray"),c("folder"+g+m+v,f)}Object.defineProperty(t,"__esModule",{value:!0}),t.normalize=n,t.paths_are_equal=r,t.inSameDirectory=i,t.filename=o,t.filename_without_extension=s,t.file_extension=a,t.file_extension_for_logging=u;var f={_other:"page_white",log:"page_white",msg:"page_white",sln:"page_white",vcproj:"page_white",txt:"page_white_text",wps:"page_white_text",doc:"page_white_word",docx:"page_white_word",docm:"page_white_word",rtf:"page_white_word",pages:"page_white_word",wpd:"page_white_word",odt:"page_white_word",pdf:"page_white_acrobat",eps:"page_white_acrobat",xls:"page_white_excel",xlsm:"page_white_excel",xlsx:"page_white_excel",xlsb:"page_white_excel",ods:"page_white_excel",csv:"page_white_excel",ppt:"page_white_powerpoint",pptx:"page_white_powerpoint",pptm:"page_white_powerpoint",pps:"page_white_powerpoint",ppsx:"page_white_powerpoint",ppsm:"page_white_powerpoint",odp:"page_white_powerpoint",key:"page_white_keynote",css:"page_white_code",html:"page_white_code",htm:"page_white_code",xml:"page_white_code",php:"page_white_code",c:"page_white_code",h:"page_white_code",rb:"page_white_code",cpp:"page_white_code",java:"page_white_code",js:"page_white_code",json:"page_white_code",cs:"page_white_code",py:"page_white_code",pl:"page_white_code",exe:"page_white_gear",dll:"page_white_gear",app:"page_white_gear",mp3:"page_white_sound",m3u:"page_white_sound",wav:"page_white_sound",m4a:"page_white_sound",wma:"page_white_sound",aif:"page_white_sound",iff:"page_white_sound",mid:"page_white_sound",mpa:"page_white_sound",ra:"page_white_sound",aiff:"page_white_sound",amr:"page_white_sound",ogg:"page_white_sound","3ga":"page_white_sound",aac:"page_white_sound",oga:"page_white_sound",gif:"page_white_picture",png:"page_white_picture",jpg:"page_white_picture",jpeg:"page_white_picture",tiff:"page_white_picture",tif:"page_white_picture",bmp:"page_white_picture",odg:"page_white_picture","3fr":"page_white_picture",ari:"page_white_picture",arw:"page_white_picture",srf:"page_white_picture",sr2:"page_white_picture",bay:"page_white_picture",crw:"page_white_picture",cr2:"page_white_picture",cap:"page_white_picture",eip:"page_white_picture",dcs:"page_white_picture",dcr:"page_white_picture",drf:"page_white_picture",k25:"page_white_picture",kdc:"page_white_picture",dng:"page_white_picture",erf:"page_white_picture",fff:"page_white_picture",iiq:"page_white_picture",mef:"page_white_picture",mos:"page_white_picture",mrw:"page_white_picture",nef:"page_white_picture",nrw:"page_white_picture",orf:"page_white_picture",pef:"page_white_picture",ptx:"page_white_picture",pxn:"page_white_picture",r3d:"page_white_picture",raf:"page_white_picture",rw2:"page_white_picture",raw:"page_white_picture",rwl:"page_white_picture",rwz:"page_white_picture",obm:"page_white_picture",srw:"page_white_picture",x3f:"page_white_picture",svg:"page_white_picture",asf:"page_white_film",avi:"page_white_film",flv:"page_white_film",mov:"page_white_film",mp4:"page_white_film",mkv:"page_white_film",wmv:"page_white_film",mpg:"page_white_film","3gp":"page_white_film","3gpp":"page_white_film",m4v:"page_white_film",vob:"page_white_film",ogv:"page_white_film",gz:"page_white_compressed",tar:"page_white_compressed",rar:"page_white_compressed",zip:"page_white_compressed",tgz:"page_white_compressed",bz2:"page_white_compressed",iso:"page_white_dvd",dmg:"page_white_dvd",ai:"page_white_vector",psd:"page_white_paint",au:"page_white_sound",fla:"page_white_flash",swf:"page_white_flash",url:"page_white_linkfile",webloc:"page_white_linkfile",website:"page_white_linkfile"};t.ICON_SIZES={SMALL:"SMALL",LARGE:"LARGE",XLARGE:"XLARGE"},t.extension_icon=l,t.file_icon=_,t.parent_dir=d,t.new_folder_icon=p,t.folder_icon=h}),function(){"use strict";var e=function(e,n){function r(){this.constructor=e}for(var i in n)t.call(n,i)&&(e[i]=n[i]);return r.prototype=n.prototype,e.prototype=new r,e.__super__=n.prototype,e},t={}.hasOwnProperty;define("modules/clean/flux/dispatcher",["external/flux","modules/core/exception"],function(t,n){var r;return r=!1,new((function(t){function i(){return i.__super__.constructor.apply(this,arguments)}return e(i,t),i.prototype.dispatch=function(e){var t;n.assert(!r,"Invariant error: cannot dispatch during dispatch."),n.assert(null!=e.type,"Invariant error: cannot dispatch action without 'type' property."),r=!0;try{"function"==typeof this.dispatch_begin&&this.dispatch_begin();try{return i.__super__.dispatch.call(this,{action:e})}catch(e){return t=e,n.reportException({err:t}),console.error(t)}finally{"function"==typeof this.dispatch_end&&this.dispatch_end()}}finally{r=!1}},i})(t.Dispatcher))})}.call(this),function(){define("modules/clean/fuzzy",[],function(){var e;return e={simpleFilter:function(t,n){return n.filter(function(n){return e.test(t,n)})},test:function(t,n){return null!==e.match(t,n)},match:function(e,t,n){var r,i,o,s,a,u,c,l,_,d,p,h,f;for(n=n||{},l=0,h=[],c=t.length,f=0,a=0,d=n.pre||"",_=n.post||"",i=n.caseSensitive&&t||t.toLowerCase(),r=void 0,void 0,e=n.caseSensitive&&e||e.toLowerCase(),u=0,p=[],o=0,s=0;u<c;)r=t[u],i[u]===e[l]?(r=d+r+_,s?s+=1:(o=u,s=1),l+=1,a+=1+a):(a=0,s&&(p.push([o,s]),s=0)),f+=a,h[h.length]=r,u++;return s&&p.push([o,s]),l===e.length?{highlighted:p,rendered:h.join(""),score:f}:null},filter:function(e,t,n){var r,i;return null==n&&(n={}),i=[],r=this._reduce.bind(this,e,n),t.reduce(r,i).sort(this._sort)},_reduce:function(t,n,r,i,o){var s,a;return a=i,n.extract&&(a=n.extract(i)),s=e.match(t,a,n),null!=s&&r.push({string:s.rendered,score:s.score,index:o,original:i}),r},_sort:function(e,t){var n;return n=t.score-e.score,n?n:e.index-t.index}}})}.call(this),function(){define("modules/clean/job_progress",["jquery","modules/core/dom","modules/clean/dbmodal_stack"],function(e,t,n){var r,i,o,s;return r=n.DBModalStack,s={make:function(t,n){var r,i,o,s,a,u,c;return null==n&&(n=300),c=n.toString()+"px",o=e("<div />",{class:"outer-progress-bar"}).css({width:c}),r=e("<div />",{class:"inner-progress-bar",id:"pb_"+t}).css({width:c}),a=e("<div />",{class:"under-pb progress-bar"}).css({width:c}),s=e("<div />",{class:"over-pb progress-bar",id:"pb_"+t+"_over"}).css({display:"none"}),u=e("<div />",{class:"pb-percentage",id:"pb_"+t+"_upct"}).css({width:c}),i=e("<div />",{class:"pb-percentage",id:"pb_"+t+"_opct"}).css({width:c}),a.append(u),s.append(i),r.append(a),r.append(s),o.append(r),s.data("progress-width",n),o},set:function(t,n){var r,i,o,s;if(r=e("#pb_"+t+"_over"))return i=n.split("/").map(Number),n=i.length>1?i[0]/i[1]:i[0],n=isNaN(n)?0:n,o=100*Math.min(n,1),s=String(o)+"%",r.show(),r.css({backgroundColor:"#348DD3",overflow:"hidden",width:s})}},i={complete:{},handled:function(e){var t;return!!e&&(t=!!i.complete[e],i.complete[e]=!0,t)},peek:function(e){return!!e&&!!i.complete[e]}},o={show:function(n){var i,o,a,u,c,l,_;if(n&&(null!=(_=r.top())&&_.hide(),i=e("body"),o=e("<div />",{id:"modal-progress-overlay"}),o.hide(),o.appendTo(i),e("#browse-box").length?t.clone_position(o,e("#browse-box")):e("#gallery-view-media").length?t.clone_position(o,e("#gallery-view-media")):o.css({position:"fixed",width:"100%",height:"100%"}),o.width()))return c=e("<div />",{id:"modal-progress-content"}),u=e("<div />",{id:"modal-progress-container"}),a=e("<div />",{id:"modal-progress-bar",opacity:1,html:s.make("modal-progress",150,"")}),l=e("<div />",{id:"modal-progress-text",text:n}),c.hide(),u.append(a,l),c.append(u),i.append(c),o.fadeTo(250,.7),c.fadeIn(250)},update:function(e){var t;if(t="progress",!(e.indexOf(t)>-1&&(e=e.substring(t.length),isNaN(e))))return s.set("modal-progress",e)},hide:function(){return e("#modal-progress-overlay").fadeOut(250,function(){return e("#modal-progress-overlay").remove()}),e("#modal-progress-content").fadeOut(250,function(){return e("#modal-progress-content").remove()})}},{ModalProgress:o,Job:i}})}.call(this),function(){define("modules/clean/js_environment",[],function(){return{isBrowser:function(){return"undefined"!=typeof window&&null!==window},isTest:function(){return"undefined"!=typeof jasmine&&null!==jasmine}}})}.call(this),define("modules/clean/keycode",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});(function(e){e[e.A=65]="A",e[e.BACKSPACE=8]="BACKSPACE",e[e.TAB=9]="TAB",e[e.ENTER=13]="ENTER",e[e.SHIFT=16]="SHIFT",e[e.CONTROL=17]="CONTROL",e[e.ALT=18]="ALT",e[e.ESC=27]="ESC",e[e.SPACE=32]="SPACE",e[e.PAGE_UP=33]="PAGE_UP",e[e.PAGE_DOWN=34]="PAGE_DOWN",e[e.END=35]="END",e[e.HOME=36]="HOME",e[e.LEFT=37]="LEFT",e[e.UP=38]="UP",e[e.RIGHT=39]="RIGHT",e[e.DOWN=40]="DOWN",e[e.INSERT=45]="INSERT",e[e.DELETE=46]="DELETE",e[e.TWO_KEY=50]="TWO_KEY",e[e.EQUALS=61]="EQUALS",e[e.COMMAND=91]="COMMAND",e[e.PLUS_EQUALS_FF=107]="PLUS_EQUALS_FF",e[e.MINUS_FF=109]="MINUS_FF",e[e.F1=112]="F1",e[e.F2=113]="F2",e[e.F3=114]="F3",e[e.F4=115]="F4",e[e.F5=116]="F5",e[e.F6=117]="F6",e[e.F7=118]="F7",e[e.F8=119]="F8",e[e.F9=120]="F9",e[e.F10=121]="F10",e[e.F11=122]="F11",e[e.F12=123]="F12",e[e.PLUS_EQUALS_FF_GERMAN=171]="PLUS_EQUALS_FF_GERMAN",e[e.MINUS_FF_MAC=173]="MINUS_FF_MAC",e[e.PLUS_CHROME=187]="PLUS_CHROME",e[e.MINUS_CHROME=189]="MINUS_CHROME",e[e.FORWARD_SLASH=191]="FORWARD_SLASH",e[e.AT_SIGN=64]="AT_SIGN",e[e.PROCESSING=229]="PROCESSING"})(t.KeyCode||(t.KeyCode={}))}),function(){define("modules/clean/react/tooltip",["external/react","external/react-dom","external/underscore","jquery"],function(e,t,n,r){var i,o,s,a,u,c,l,_,d,p,h;return l={TOP:0,BOTTOM:1,LEFT:2,RIGHT:3,BOTTOM_RIGHT:4},p=e.DOM,s="tooltip-holder",i=7,a=1e4,o="data-event-id",d=function(){var e,t;return e=s,t=r("#"+e),t.length||(t=r("<div />").attr({id:e,style:"z-index: "+a}).prependTo("body")),t[0]},_=function(e){var t,n,r;return n=e.offset(),r=e.outerWidth(),t=e.outerHeight(),{left_x:n.left,right_x:n.left+r,top_y:n.top,bottom_y:n.top+t,width:r,height:t}},c=e.createClass({displayName:"TooltipBubble",propTypes:{position:e.PropTypes.oneOf((function(){var e;e=[];for(h in l)e.push(l[h]);return e})()),contents:e.PropTypes.oneOfType([e.PropTypes.element,e.PropTypes.string]),className:e.PropTypes.string,mouse_move_cb:e.PropTypes.func,mouse_out_cb:e.PropTypes.func,targetElementDimensions:e.PropTypes.shape({left_x:e.PropTypes.number,right_x:e.PropTypes.number,top_y:e.PropTypes.number,bottom_y:e.PropTypes.number,width:e.PropTypes.number,height:e.PropTypes.number})},render:function(){var e,t,n,o,s;return t=this.props.targetElementDimensions,n=r(window),s=r(window).scrollTop(),o=r(window).scrollLeft(),e=function(){switch(this.props.position){case l.TOP:return{bottom:n.height()-t.top_y+i+s};case l.BOTTOM:return{top:t.bottom_y+i-s};case l.LEFT:return{right:n.width()-t.left_x+i+o};case l.RIGHT:return{left:t.right_x+i-o};case l.BOTTOM_RIGHT:return{left:t.right_x-i-o,top:t.bottom_y+i-s}}}.call(this),p.div({className:"tooltip-bubble "+(this.props.className||""),ref:"tooltip",style:e,onMouseMove:this.props.mouse_move_cb?this.props.mouse_move_cb:void 0,onMouseLeave:this.props.mouse_out_cb?this.props.mouse_out_cb:void 0},p.div({className:"tooltip-inner"},this.props.contents))},componentDidMount:function(){return this._centerAndShow()},componentDidUpdate:function(){return this._centerAndShow()},_centerAndShow:function(){var e,n,o,s,a,u,c,d,p,h,f;return e=r(t.findDOMNode(this.refs.tooltip)),c=this.props.targetElementDimensions,d=_(e),u=r(window).scrollTop(),a=r(window).scrollLeft(),(o=this.props.position)===l.TOP||o===l.BOTTOM?(f=r(window).width(),n=c.left_x+c.width/2-d.width/2-a,n<0?n=0:n+d.width>f&&(n=f-d.width-i),e.css("left",n+"px")):(s=this.props.position)!==l.LEFT&&s!==l.RIGHT||(h=r(window).height(),p=c.top_y+c.height/2-d.height/2-u,p<0?p=0:p+d.height>h&&(p=h-d.height-i),e.css("top",p+"px")),e.show()}}),u=e.createClass({displayName:"Tooltip",propTypes:{position:e.PropTypes.oneOf((function(){var e;e=[];for(h in l)e.push(l[h]);return e})()),tooltip_contents:e.PropTypes.oneOfType([e.PropTypes.element,e.PropTypes.string]),tooltip_classname:e.PropTypes.string,hide_delay:e.PropTypes.number,interaction_enabled:e.PropTypes.bool,is_focusable:e.PropTypes.bool},render:function(){return p.div({className:"tooltip-target",onMouseMove:(function(e){return function(t){return e._show(t)}})(this),onFocus:(function(e){return function(t){return e._show(t)}})(this),onMouseLeave:this._on_mouse_leave(),onBlur:this._on_mouse_leave(),id:this.state.tooltip_id,ref:"tooltipTarget",tabIndex:this.props.is_focusable?0:void 0},this.props.children)},componentDidMount:function(){return r(document).bind("scroll."+this.state.event_id,(function(e){return function(t){return e._hide(t)}})(this))},componentDidUpdate:function(){if(this.state.visible)return this._render_tooltip()},componentWillUnmount:function(){var e;return r(document).unbind("scroll."+this.state.event_id),e=d(),t.unmountComponentAtNode(e)},_on_mouse_leave:function(e){return(function(e){return function(t){return e.props.hide_delay>0?e._scheduleHide(e.props.hide_delay):e._hide(t)}})(this)},_render_tooltip:function(){var n,i;return i=d(),r("#"+s).css("position","fixed"),r("#"+s).css("left","0"),r("#"+s).css("right","0"),this.props.hide_delay>0&&r("#"+s).attr(o,this.state.event_id),this.props.position===l.TOP?(r("#"+s).css("top","auto"),r("#"+s).css("bottom","0")):(r("#"+s).css("top","0"),r("#"+s).css("bottom","auto")),n=e.createElement(c,{position:this.props.position,contents:this.props.tooltip_contents,className:this.props.tooltip_classname,mouse_move_cb:this.props.interaction_enabled?this._clear_timeout:void 0,mouse_out_cb:this.props.interaction_enabled?this._on_mouse_leave():void 0,targetElementDimensions:_(r(t.findDOMNode(this.refs.tooltipTarget)))}),t.unmountComponentAtNode(i),t.render(n,i)},_show:function(){if(!this.state.visible||this._last_timeout)return this._render_tooltip(),this.setState({visible:!0}),this._clear_timeout()},_hide:function(){var e,n;if(this.state.visible)return n=d(),this._last_timeout?(e=r(n).attr(o),e===this.state.event_id&&(t.unmountComponentAtNode(n),this._clear_timeout())):t.unmountComponentAtNode(n),this.setState({visible:!1})},_scheduleHide:function(e){if(this.state.visible)return this._last_timeout=setTimeout(this._hide,e)},_clear_timeout:function(){if(this._last_timeout)return clearTimeout(this._last_timeout),this._last_timeout=null},getInitialState:function(){return{visible:!1,event_id:n.uniqueId()}},getDefaultProps:function(){return{interaction_enabled:!1,hide_delay:0}}}),{Tooltip:u,TooltipPosition:l}})}.call(this),function(){define("modules/clean/referrer_cleansing_redirect",["external/sjcl","modules/core/browser","modules/core/cookies","modules/core/uri"],function(e,t,n,r){var i,o,s;return s=function(t){var r,i,o;return r=e.codec.utf8String.toBits(n.read("__Host-js_csrf")),e.codec.utf8String.toBits(t),i=new e.misc.hmac(r),o=i.encrypt(t),e.codec.base64.fromBits(o)},i=function(e){var t,n;return t=r.parse(e).scheme,t&&"http"!==t&&"https"!==t?"#":(n=new r({scheme:"https",authority:"www.dropbox.com",path:"/referrer_cleansing_redirect"}),n.setQuery({url:e,hmac:s(e)}),n)},o=function(e){return t.redirect(i(e))},{get_redirect_uri:i,redirect:o}})}.call(this),define("modules/clean/static_urls",["require","exports","modules/constants/env","modules/core/exception","modules/core/uri"],function(e,t,n,r,i){"use strict";function o(e){r.assert(0===e.indexOf("/static/"),"#{path} is not a /static url");return new i({scheme:"https",authority:n.STATIC_CONTENT_HOST,path:e}).toString()}Object.defineProperty(t,"__esModule",{value:!0}),t.static_url=o}),define("modules/clean/storage",["require","exports"],function(e,t){"use strict";function n(e){try{var t="__storage_test__";return e.setItem(t,t),e.removeItem(t),e}catch(t){return e&&r(t)?e:new i}}function r(e){return e instanceof DOMException&&(22===e.code||1014===e.code||"QuotaExceededError"===e.name||"NS_ERROR_DOM_QUOTA_REACHED"===e.name)}Object.defineProperty(t,"__esModule",{value:!0});var i=(function(){function e(){this.storage={}}return e.prototype.clear=function(){this.length=0,this.storage={}},e.prototype.getItem=function(e){return this.storage[e]},e.prototype.key=function(e){return Object.keys(this.storage)[e]},e.prototype.removeItem=function(e){delete this.storage.key},e.prototype.setItem=function(e,t){this.storage[e]=t,this.length=Object.keys(this.storage).length},e})();t.MemoryStorage=i;var o=(function(){function e(e){this.storage=e}return e.prototype.get=function(e){if(this.storage){var t=this.storage.getItem(e);return t?JSON.parse(t):t}},e.prototype.set=function(e,t){if(this.storage)try{return null===t?this.delete(e):this.storage.setItem(e,JSON.stringify(t))}catch(e){if(r(e))return;throw e}},e.prototype.delete=function(e){return null!=this.storage?this.storage.removeItem(e):void 0},e.prototype.reset=function(){return null!=this.storage?this.storage.clear():void 0},e})(),s=window.sessionStorage?window.sessionStorage:new i;t.SessionStorage=new o(n(s));var a=window.localStorage?window.localStorage:new i;t.LocalStorage=new o(n(a))}),function(){define("modules/clean/stormcrow/stormcrow_panel_action_types",[],function(){var e;return e={},e.ActionTypes={STORMCROW_REQUEST_INFO_RETRIEVED:"STORMCROW_REQUEST_INFO_RETRIEVED"},e})}.call(this),function(){define("modules/clean/stormcrow/stormcrow_panel_actions",["modules/clean/flux/dispatcher","modules/clean/stormcrow/stormcrow_panel_action_types"],function(e,t){var n;return n=t.ActionTypes,new((function(){function t(){}return t.prototype.FEATURES_USED_URL="/stormcrow_features_used",t.prototype.add_request_info=function(t){return e.dispatch({type:n.STORMCROW_REQUEST_INFO_RETRIEVED,data:t})},t})())})}.call(this),define("modules/clean/undo",["require","exports","jquery","modules/constants/undo_strings","modules/core/notify"],function(e,t,n,r,i){"use strict";function o(){u&&(u(a),u=void 0,a=null)}function s(e,t,s,l,_){if(void 0===_&&(_=r.UNDO),!t||!Object.keys(t).length)return void i.success(e);a=t,u=s,l=null==l?30:l;var d=n("<span />");e.toHTML?d.html(e.toHTML()):d.text(e);var p=n('<button class="button-as-link"/>').text(_);p.on("click",function(e){e.preventDefault(),o(),i.clear()}),d.append("&nbsp;").append(p),c=i.success(d,l)}Object.defineProperty(t,"__esModule",{value:!0});var a,u,c;t.performUndo=o,t.notifyWithUndo=s}),define("modules/clean/user",["require","exports"],function(e,t){"use strict";return(function(){function e(e){Object.assign(this,e)}return e.prototype.toString=function(){return String(this.id)},e})()}),define("modules/clean/ux_analytics",["require","exports"],function(e,t){"use strict";function n(){return(new Date).getTime()}function r(){var e=document.documentElement;return(window.pageYOffset||e.scrollTop)-(e.clientTop||0)}function i(e){return void 0===e&&(e=window),e.location.href}function o(e){return void 0===e&&(e=window),e.location.search}function s(e,t,r){void 0===r&&(r={});var i=null,o=0;return function(){var s=n();o||r.leading!==!1||(o=s);var a=t-(s.valueOf()-o.valueOf()),u=arguments;if(a<=0||a>t)i&&(clearTimeout(i),i=null),o=s,e.apply(null,u),u=null;else if(!i&&r.trailing!==!1){var c=function(){o=r.leading===!1?0:n(),i=null,e.apply(null,u),u=null};i=setTimeout(c,a)}}}function a(){var e={},t=o();if(t.length)for(var n=t.substring(1).replace(/&amp;/g,"&").split("&"),r=0,i=n;r<i.length;r++){var s=i[r],a=s.split("="),u=a[0],c=a[1];u&&c&&(u=u.trim(),c=c.trim(),u.length&&c.length&&(e[u]=decodeURIComponent(c.replace(/\+/g," "))))}return e}function u(e){return e&&"A"===e.nodeName}function c(e){return e&&e.getAttribute("data-trackingid")}function l(e){return e&&"BODY"===e.nodeName}function _(e){for(var t=e,n=0;n<6&&(!u(t)&&!c(t))&&!l(t);n++){var r=t.parentNode;if(!(r instanceof HTMLElement))break;t=r}return t}Object.defineProperty(t,"__esModule",{value:!0});var d,p=(function(){var e=null,t="uxa.onedoesnotsimplyusesessionstorage";try{e=window.sessionStorage,e&&(e.setItem(t,t),e.removeItem(t))}catch(t){e=null}return e})(),h=(function(){var e=window;return e.hasOwnProperty("JSON")?e.JSON:null})();(function(e){function t(e){return"uxa."+e}function n(){return!!a}function r(e){if(!a||!u)return null;try{var n=a.getItem(t(e));return null===n?null:u.parse(n)}catch(e){return null}}function i(e,n){if(!a||!u)return null;try{return null===n?o(e):(a.setItem(t(e),u.stringify(n)),null)}catch(e){return null}}function o(e){return a?(a.removeItem(t(e)),null):null}function s(e){return a?(a.clear(),null):null}var a=p,u=h;e.isEnabled=n,e.get=r,e.set=i,e.remove=o,e.clear=s})(d=t.UXStorage||(t.UXStorage={}));var f={heartbeat:"heartbeat",linkClick:"link_click",linkNoSessionStorage:"link_no_session_storage",modalClose:"modal_close",modalOpen:"modal_open",pageView:"page_view",scroll:"scroll_event"},g=Object.keys(f).map(function(e){return f[e]}),m={linkClick:"clicked_link",trackingParams:"tracking_params"},v=(function(){function e(e,t,i,o){void 0===o&&(o={});var s=this;this.currentModalId=null,this.lastScrollOffset=0,this.scrollTimer=null,this.startHeartbeat=function(){for(var e=0,t=[2,5,10,15,30];e<t.length;e++){var n=t[e];setTimeout(s.logOnPage.bind(s,f.heartbeat),1e3*n)}for(var r=0,i=[1,2,4,9];r<i.length;r++){var n=i[r];setTimeout(s.logOnPage.bind(s,f.heartbeat),60*n*1e3)}},this.delayedInit=function(){s.saveTrackingParams(),s.logPageView(),s.logDelayedClickEvent(),s.setupListeners()},this.trackScrolling=function(){s.scrollTimer&&clearTimeout(s.scrollTimer),s.scrollTimer=setTimeout(s.onScroll,500)},this.onScroll=function(){var e=r();s.lastScrollOffset!==e&&(s.lastScrollOffset=e,s.logOnPage(f.scroll,{vertical_offset:e}))},this.handleLinkClick=function(e){var t=_(e.target);if(u(t)||c(t)){var n=t.getBoundingClientRect(),i=s.createEvent(f.linkClick,{left:Math.round(n.left),link_id:t.getAttribute("data-trackingid"),link_rank:s.getLinkRank(t),origin_href:t.getAttribute("href"),time_on_page:s.getTimeOnPage(),top:Math.round(n.top),vertical_offset:r(),tag_name:t.tagName.toLowerCase()});s.delayedLinkClickLogging&&u(t)?s.storeDelayedLinkClick(i):s.logEvent(i)}},this.handleLinkKeyboardEnter=function(e){13===e.keyCode&&s.handleLinkClick(e)},this.trackModalShow=function(){var e=document.querySelector(s.modalClass);e&&(e.offsetWidth>0||e.offsetHeight>0)&&(s.currentModalId=e.id,s.logModal(f.modalOpen,s.currentModalId))},this.trackModalHide=function(){s.currentModalId&&(s.logModal(f.modalClose,s.currentModalId),s.currentModalId=null)},this.requestId=e,this.orgReferrer=t,this.logger=i,void 0!==o.delayed_link_click_logging?this.delayedLinkClickLogging=o.delayed_link_click_logging:this.delayedLinkClickLogging=!0,void 0!==o.modal_class?this.modalClass=o.modal_class:this.modalClass=".ui-modal",this.initTime=n(),this.startHeartbeat(),setTimeout(this.delayedInit,200)}return e.resetStorage=function(){for(var e=0,t=Object.keys(m);e<t.length;e++){var n=t[e];d.remove(m[n])}},e.prototype.setupListeners=function(){window.addEventListener("scroll",s(this.trackScrolling,2e3,{leading:!0})),document.body.addEventListener("mousedown",this.handleLinkClick),document.body.addEventListener("keydown",this.handleLinkKeyboardEnter),document.addEventListener("modalOpened",this.trackModalShow),document.addEventListener("modalClosed",this.trackModalHide)},e.prototype.logPageView=function(){this.logEvent(this.createEvent(f.pageView))},e.prototype.logModal=function(e,t){var n={modal:t};this.logOnPage(e,n)},e.prototype.logDelayedClickEvent=function(){if(!d.isEnabled())return null;var e=d.get(m.linkClick);if(e)try{e.destination_url=i();var t={eventName:f.linkClick,extra:e};this.logEvent(t),d.remove(m.linkClick)}catch(e){}
return null},e.prototype.logOnPage=function(e,t){void 0===t&&(t={}),t.vertical_offset=t.vertical_offset||r(),t.time_on_page=t.time_on_page||this.getTimeOnPage(),this.getTimeOnPage()<600&&this.logEvent(this.createEvent(e,t))},e.prototype.logEvent=function(e){try{if(g.indexOf(e.eventName)===-1)throw new Error("UXAnalytics.log: trying to log an invalid event ("+e.eventName+")");this.logger.log(e.eventName,e.extra)}catch(e){throw e}},e.prototype.createEvent=function(e,t){if(void 0===t&&(t={}),this.orgReferrer&&(t.org_referrer=this.orgReferrer),t.request_id=t.request_id||this.requestId,t.url=t.url||i(),t.uxa_v=2.2,this.trackingParams)for(var n=0,r=Object.keys(this.trackingParams);n<r.length;n++){var o=r[n],s=o.replace(/^_/,""),a=this.trackingParams[o];t["param_"+s]=a}return{eventName:e,extra:t}},e.prototype.storeDelayedLinkClick=function(e){if(!d.isEnabled())return this.logOnPage(f.linkNoSessionStorage),!1;try{d.set(m.linkClick,e.extra)}catch(e){return!1}return!0},e.prototype.saveTrackingParams=function(){var e=this.getTrackingParams();Object.keys(e).length?(d.set(m.trackingParams,e),this.trackingParams=e):this.trackingParams=null},e.prototype.getTrackingParams=function(){for(var e=d.get(m.trackingParams)||{},t=["gclid","oqa","trigger","_tk","_camp","_ad","_net","_kw","utm_source","utm_medium"],n=a(),r=0,i=t;r<i.length;r++){var o=i[r];n.hasOwnProperty(o)&&(e[o]=n[o])}return e},e.prototype.getTimeOnPage=function(){return Math.round((n()-this.initTime)/1e3)},e.prototype.getLinkRank=function(e){var t=e.getAttribute("href"),n=document.querySelectorAll('a[href="'+t+'"]');if(1===n.length)return 1;for(var r=0;r<n.length;r++)if(n[r]===e)return r+1;return-1},e})();t.UXAnalytics=v}),define("modules/clean/viewer",["require","exports","tslib","modules/constants/viewer","modules/core/exception","modules/clean/user"],function(e,t,n,r,i,o){"use strict";var s=(function(){function e(e){void 0===e&&(e={}),this.replace_viewer_data(e)}return e.get_viewer=function(){return e._cached_viewer},e.get_role_title=function(e){return this.get_viewer().get_title_by_role(e.role)},e.get_root_name=function(e){return this.get_viewer().get_root_name_by_role(e.role)},e.get_is_signed_in=function(e){return e.is_signed_in},e.prototype.replace_viewer_data=function(e){void 0===e&&(e={}),this._authed_users={},this._all_users={};for(var t=e._user_data||[],n=0,r=t;n<r.length;n++){var i=r[n],s=new o(i);this._all_users[s.id]=s,i._authed&&(this._authed_users[s.id]=s)}this.display_name=e.display_name,this.team_id=e.team_id,this.team_dbtid=e.team_dbtid,this.team_name=e.team_name,this.team_is_limited=e.team_is_limited||!1,this.is_assume_user_session=e.is_assume_user_session||!1,this.is_team_assume_user_session=e.is_team_assume_user_session||!1,this.is_reseller_session=e.is_reseller_session||!1,this.can_moderate_comments=e.can_moderate_comments||!1,this.is_signed_in=t.length>0,this.is_paired=t.length>1,e.deprecated_first_user_in_the_cookie_id&&(this.deprecated_first_user_in_the_cookie=this.get_user_by_id(e.deprecated_first_user_in_the_cookie_id)),this._load_cached_users()},e.prototype.get_user_by_role=function(e,t){var n=this.get_uid_by_role(e);return null!=n?this.get_user_by_id(n,t):void 0},e.prototype.role_exists=function(e){return null!=this.get_uid_by_role(e)},e.prototype.get_user_by_id=function(e,t){i.assert(this.is_uid_associated(e),"User "+e+" is not associated with this viewer");var n=t?this._all_users:this._authed_users,r=n[e];return i.assert(!!r,"User "+e+" is not signed in"),r},e.prototype.is_role_signed_in=function(e){var t=this.get_uid_by_role(e);return null!=t&&t in this._authed_users},e.prototype.is_uid_signed_in=function(e){return e in this._authed_users},e.prototype.is_user_signed_in=function(e){return null!=e&&this.is_uid_signed_in(e.id)},e.prototype.is_uid_associated=function(e){return e in this._all_users},e.prototype.get_users=function(e){var t=e?this._all_users:this._authed_users,n=Object.keys(t).map(function(e){return t[e]});return n.sort(function(e,t){return"personal"===e.role?-1:1}),n},e.prototype.get_user_ids=function(e){return this.get_users(e).map(function(e){return e.id})},e.prototype.get_roles=function(e){return this.get_users(e).map(function(e){return e.role})},e.prototype.get_account_ids=function(e){return this.get_users(e).map(function(e){return e.account_id})},e.prototype.get_email_by_role=function(e){var t=this.get_user_by_role(e,!0);return t&&t.email},e.prototype.get_uid_by_role=function(e){"photos"===e&&(e=this.is_paired||!this.is_signed_in?"personal":this._all_users[Object.keys(this._all_users)[0]].role);for(var t in this._all_users)if(this._all_users.hasOwnProperty(t)){var n=this._all_users[t];if(n.role===e)return n.id}},e.prototype.get_title_by_role=function(e){return this.is_paired?"personal"===e?r.PERSONAL_ROLE_STRING:this.team_name:""},e.prototype.get_root_name_by_role=function(e){return this.get_title_by_role(e)||r.DEFAULT_ROOT_NAME},e.prototype._sign_in_all_users=function(){this._authed_users=n.__assign({},this._all_users),this._load_cached_users()},e.prototype._sign_out_user_by_id=function(e){delete this._authed_users[e],this._load_cached_users()},e.prototype.sign_in_user_by_id=function(e){i.assert(this.is_uid_associated(e),"User "+e+" is not associated with this viewer"),this._authed_users[e]=this._all_users[e],this._load_cached_users()},e.prototype._load_cached_users=function(){this.personal_user=this._authed_users[this.get_uid_by_role("personal")],this.photos_user=this._authed_users[this.get_uid_by_role("photos")],this.work_user=this._authed_users[this.get_uid_by_role("work")],this.personal_email=this.get_email_by_role("personal"),this.work_email=this.get_email_by_role("work"),this.is_personal_user_signed_in=this.is_role_signed_in("personal"),this.is_photos_user_signed_in=this.is_role_signed_in("photos"),this.is_work_user_signed_in=this.is_role_signed_in("work")},e})();return s._cached_viewer=new s(r._viewer_properties),s}),define("modules/core/accessible_announce",["require","exports","jquery","external/purify","modules/clean/css"],function(e,t,n,r,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=(function(){function e(){}return e.polite=function(e,t){return void 0===t&&(t=10),this.announce("polite",e,t)},e.assertive=function(e,t){return void 0===t&&(t=10),this.announce("assertive",e,t)},e.clear=function(){return this.lastTimeout&&clearTimeout(this.lastTimeout),n("#accessible-announce").html("").attr("aria-live","off")},e.announce=function(e,t,r){var o=this;return void 0===r&&(r=10),i.require_css("/static/css/accessibility-vflMqZNeg.css",function(){return n("#accessible-announce").length?(o.setMessage(t,e),o.scheduleClear(r)):(n("body").append("<div id='accessible-announce' aria-live='assertive' class='ax-visually-hidden'></div>"),setTimeout(function(){return o.setMessage(t,e),o.scheduleClear(r)},o.TIMEOUT_LENGTH))})},e.setMessage=function(e,t){this.clear();var i=n("#accessible-announce");i.attr("aria-live",t),e.toHTML?i.html(r.sanitize(e.toHTML())):"string"==typeof e?i.text(e):e instanceof n&&i.html(r.sanitize(e.html()))},e.scheduleClear=function(e){return this.lastTimeout=setTimeout(this.clear,1e3*e)},e})();o.TIMEOUT_LENGTH=50,t.AccessibleAnnounce=o}),define("modules/core/browser",["require","exports","modules/constants/env","modules/core/exception","modules/core/uri"],function(e,t,n,r,i){"use strict";function o(e){e=e.toLowerCase();var t=/(ipad)/.exec(e)||/(edge)[ \/]([\w.]+)/.exec(e)||/(chrome)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+)/.exec(e)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||/(trident).*? rv:([\w.]+)/.exec(e)||e.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(e)||[],n=e.match(/version\/([\d.]+)/i),r=null!=n?t[1]:null;return{browser:t[1]||"",version:r||t[2]||"0"}}function s(e){return Boolean(t.msie)&&parseInt(t.version,10)<=e}function a(e){return Boolean(t.safari)&&parseInt(t.version,10)<=e}function u(e){return void 0===e&&(e=window),e.location.href}function c(e){return void 0===e&&(e=window),e.location.hostname}function l(e){return void 0===e&&(e=window),i.parse(u(e))}function _(){return window.location.hash.split("#")[1]}function d(){return u().split("#")[0]}function p(e){window.location.hash=e}function h(e){var n=t.mockableInternalMethods._parse_target(e);window.open(n,"_blank")}function f(e){return e=t.mockableInternalMethods._parse_target(e,{checkDomainWhitelist:!1,httpsOnly:!1}),window.open(e,"_blank")}function g(e,n){void 0===n&&(n=window);var r=t.mockableInternalMethods._parse_target(e,{target_window:n});t.mockableInternalMethods._navigate(r,n)}function m(e){var n=t.mockableInternalMethods._parse_target(e);window.location.replace(n)}function v(e){void 0===e&&(e=!1),window.location.reload(e)}function w(){return window.performance||null}function y(){var e=w();return e&&e.now&&e.timing?Math.round(e.now()+e.timing.navigationStart):Date.now()}function b(e){e=t.mockableInternalMethods._parse_target(e,{checkDomainWhitelist:!1,httpsOnly:!1}),t.mockableInternalMethods._navigate(e)}function E(){if(window.matchMedia){return Boolean(window.matchMedia("(-webkit-min-device-pixel-ratio: 1.1), (min-resolution: 192dpx), (min-resolution: 1.1dppx)").matches)}return!!window.devicePixelRatio&&window.devicePixelRatio>1.1}function x(){return window.navigator.onLine}function A(e){window.addEventListener("online",e),window.addEventListener("offline",e)}function S(e){window.removeEventListener("online",e),window.removeEventListener("offline",e)}function T(e){void 0===e&&(e=navigator.userAgent);var n=(e||"").toLowerCase();return t.ipod||t.iphone||n.indexOf("tizen")!==-1||n.indexOf("android")!==-1&&n.indexOf("mobile")!==-1||n.indexOf("bb10")!==-1||n.indexOf("netfront")!==-1||/windows phone|opera mini|blackberry|nokia/.test(n)||n.indexOf("firefox")!==-1&&n.indexOf("mobile")!==-1||n.indexOf("googlebot-mobile")!==-1||n.indexOf("iemobile")!==-1||n.indexOf("opera mobi")!==-1||/ucweb|ucbrowser/.test(n)||n.indexOf("microsoft office mobile")!==-1}function O(e){void 0===e&&(e=navigator.userAgent);var t=(e||"").toLowerCase();return t.indexOf("android")!==-1||t.indexOf("silk")!==-1}function C(e){return void 0===e&&(e=navigator.userAgent),t.ipad||O(e)&&!T(e)}function k(e){return void 0===e&&(e=navigator.userAgent),T(e)||C(e)}function F(){return"hidden"===window.document.visibilityState}Object.defineProperty(t,"__esModule",{value:!0});var L=o(navigator.userAgent);"trident"===L.browser&&(L.browser="msie");var D=n.REDIRECT_SAFE_ORIGINS;t.ipad="ipad"===L.browser||void 0,t.chrome="chrome"===L.browser||void 0,t.safari=!("webkit"!==L.browser&&!Boolean(t.ipad))||void 0,t.opera="opera"===L.browser||void 0,t.msie="msie"===L.browser||void 0,t.edge="edge"===L.browser||void 0,t.mozilla="mozilla"===L.browser||void 0,t.webkit=!("webkit"!==L.browser&&!Boolean(t.ipad)&&!Boolean(t.chrome))||void 0,t.mac=Boolean(/(macintosh)/.exec(navigator.userAgent.toLowerCase())),t.iphone=Boolean(/(iphone)/.exec(navigator.userAgent.toLowerCase())),t.ipod=Boolean(/(ipod)/.exec(navigator.userAgent.toLowerCase())),t.iOS=t.ipad||t.ipod||t.iphone,t.browser_name=L.browser,t.version=L.version,t.msie_version_at_most=s,t.safari_version_at_most=a,t.get_href=u,t.get_hostname=c,t.get_uri=l,t.get_hash=_,t.get_href_no_hash=d,t.set_hash=p,t.mockableInternalMethods={_navigate:function(e,t){void 0===t&&(t=window),t.location.href=e},_parse_target:function(e,t){var n=void 0===t?{}:t,i=n.target_window,o=void 0===i?window:i,s=n.checkDomainWhitelist,a=void 0===s||s,u=n.httpsOnly,c=void 0===u||u,l=o.document.createElement("a");l.href=e;var _=l.protocol||o.location.protocol;":"===l.protocol&&(_=o.location.protocol);var d=l.hostname||o.location.hostname,p=l.port||o.location.port;"443"===p&&"https:"===_&&(p=""),a&&r.assert(!p,"Non-default port not legal when checking the whitelist.");var h=0===l.pathname.indexOf("/")?l.pathname:"/"+l.pathname;c?r.assert("https:"===_,"Target URI must be secure"):r.assert("data:"!==_&&"javascript:"!==_&&"vbscript:"!==_,"Target URI can't use the data or javascript scheme"),a&&r.assert(D.indexOf(d)>-1,"Target URI must be in the domain whitelist");var f=d;return p&&(f=f+":"+p),e=_+"//"+f+h+l.search+l.hash}},t.open_tab=h,t.unsafe_open_tab=f,t.redirect=g,t.replace_location=m,t.reload=v,t.performance=w,t.now=y,t.unsafeRedirect=b,t.is_high_density_display=E,t.isOnline=x,t.subscribeConnectivityStatusChange=A,t.unsubscribeConnectivityStatusChange=S,t.is_supported_mobile_browser=T,t.is_tablet=C,t.is_mobile_or_tablet=k,t.is_page_content_hidden=F}),function(){var e=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1};define("modules/core/dom",["jquery","modules/clean/keycode"],function(t,n){var r,i,o,s,a,u,c,l,_,d,p,h,f,g,m,v,w,y,b,E,x,A,S,T,O,C,k;return i=n.KeyCode,r="a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), iframe, object, embed, *[tabindex], *[contenteditable]",o="no-scroll",v=function(e){return!!e&&(1===e.nodeType||e.length>=1&&1===e[0].nodeType)},h=function(){return w(document.activeElement)},w=function(e){var t,n;return("INPUT"===(t=null!=e?e.tagName:void 0)||"TEXTAREA"===t||"SELECT"===t)&&"submit"!==(n=null!=e?e.type:void 0)&&"button"!==n||m(e)},m=function(e){return(null!=e?e.hasAttribute:void 0)&&(null!=e?e.hasAttribute("contenteditable"):void 0)&&"false"!==(null!=e?e.getAttribute("contenteditable").toLowerCase():void 0)},k=function(e){var n,r,i;return n=t(e),i=n.offset(),r=t(window),{left:i.left-r.scrollLeft(),top:i.top-r.scrollTop()}},a=null,u=null,C=function(){return a||(a={height:t(window).height(),width:t(window).width()}),u||(u=t(window).on("resize",function(){return a=null})),a},d=function(){return Math.max(t(document).height(),t(window).height(),document.documentElement.clientHeight)},c=null,s=null,S=function(){var e,n;return c||(c=t(window).scroll(function(){return s=null})),y()?s||(n=t(window).scrollTop(),e=t(window).scrollLeft(),s={0:e,1:n,left:e,top:n}):(n=l.top,e=l.left,s={0:e,1:n,left:e,top:n}),s},E=function(){return s=null},y=function(){return!t(document.documentElement).hasClass(o)},A=0,l=null,x=function(){var e,n,r;if(A++,e=t(document.documentElement),!e.hasClass(o))return l=S(),r=-1*l.top+"px",n=-1*l.left+"px",e.css({top:r,left:n}),e.addClass(o)},O=function(){var e,n,r;if(A>0&&A--,e=t(document.documentElement),0===A&&e.hasClass(o))return r=l.top,n=l.left,e.css({top:"",left:""}),e.removeClass(o),T(n,r+1),T(n,r-1),T(n,r)},T=function(e,n){var r,i,o;return e=Math.max(e,0),n=Math.max(n,0),n>S().top&&(n=Math.min(n,d()-p.viewport_dimensions().height)),y()?(window.scrollTo(e,n),s={0:e,1:n,left:e,top:n}):(l={0:e,1:n,left:e,top:n},o=-1*n+"px",i=-1*e+"px",r=t(document.documentElement),r.css({top:o,left:i}))},_=function(e,n,r){var i,o,s,a,u,c,l,_;return o=t(n),s=t(e),c={setLeft:!0,setTop:!0,setWidth:!0,setHeight:!0,offsetTop:0,offsetLeft:0},r=t.extend({},c,r),_=k(o),l={top:0,left:0},i=null,"absolute"===s.css("position")&&(i=s.offsetParent(),l=k(i)),i&&i[0]===document.body&&(l.left-=document.body.offsetLeft,l.top-=document.body.offsetTop),r.setLeft&&(a=_.left-l.left+r.offsetLeft+"px",s.css("left",a)),r.setTop&&(u=_.top-l.top+r.offsetTop+"px",s.css("top",u)),r.setWidth&&s.width(o[0].offsetWidth),r.setHeight&&s.height(o[0].offsetHeight),s},k=function(e){var n,r,i;return n=t(e),i=n.offset(),r=t(window),{left:i.left-r.scrollLeft(),top:i.top-r.scrollTop()}},f=function(e,n){var i;return i=t(e).find(r).filter(function(){return!!(this.offsetWidth&&this.offsetHeight||this.getClientRects().length)}),n?i.not('*[tabindex="-1"]'):i},g=function(e){var t,n,r,i;return i=f(e,!0),t=i.filter('*:not([tabindex]), *[tabindex="0"]'),r=i.not(t).toArray(),r.length?(n=function(e,t){var n,r;return n=parseInt(e.getAttribute("tabindex"),10),r=parseInt(t.getAttribute("tabindex"),10),n-r},r.sort(n),r.concat(t.toArray())):t.toArray()},b=function(t,n){var r,o,s,a,u,c,l,_,d;if(n.which===i.TAB&&(_=p.getTabbableElementsIn(t),_.length)){if(d=_.indexOf(n.target),d===-1){if(n.preventDefault(),s=p.getFocusableElementsIn(t).toArray(),n.shiftKey&&s.reverse(),a=s.indexOf(n.target),a===-1)return _[0].focus();for(o=null,l=s.slice(a),u=0,c=l.length;u<c;u++)if(r=l[u],e.call(_,r)>=0){o=r;break}return o?o.focus():n.shiftKey?_[_.length-1].focus():_[0].focus()}if(n.shiftKey){if(0===d)return n.preventDefault(),_[_.length-1].focus()}else if(d===_.length-1)return n.preventDefault(),_[0].focus()}},p={clone_position:_,document_height:d,focus_in_input:h,is_input:w,is_content_editable:m,is_page_scrollable:y,scroll_clear_cache:E,scroll_lock_document:x,scroll_offsets:S,scroll_to:T,scroll_unlock_document:O,is_element:v,viewport_offset:k,viewport_dimensions:C,getFocusableElementsIn:f,getTabbableElementsIn:g,keepFocusIn:b}})}.call(this),function(){define("modules/core/html",["jquery","external/underscore","modules/constants/page_load"],function(e,t,n){var r;return r=(function(){function e(e){this._str_DONT_TOUCH=e}return e.prototype.toHTML=function(){return this._str_DONT_TOUCH},e.prototype.toString=function(){return"[object HTML]"},e})(),(function(){var i,o,s;return r.tmpl=function(i,o){var s,a,u,c;return/[^\w:.-]/.test(i)||(a=document.getElementById(i),i=a.innerHTML,n.CSP_SCRIPT_NONCE!==(a.nonce||a.getAttribute("nonce"))&&(i="")),c=i.replace(/[\r\t\n]/g," ").replace(/'(?=[^%]*%>)/g,"\t").split("'").join("\\'").split("\t").join("'").replace(/<%=(.*?)%>/g,"',__no_conflict_HTML__._raw_escape($1),'").split("<%").join("');").split("%>").join("p.push('"),s=new Function("__no_conflict_HTML__","__no_conflict_jQuery__","TEMPLATE_DATA","var p=[],print=function(){p.push.apply(p,arguments);}; p.push('"+c+"'); return new __no_conflict_HTML__(__no_conflict_jQuery__.trim(p.join('')));"),u=t.partial(s,r,e),o?u(o):u},i=/[^\w@\.\ \-\(\)\,\$~%#\[\]\{\}\!\^]/g,s=function(e){return"&#"+e.charCodeAt(0)+";"},o=function(e){return(""+e).replace(i,s)},r.escape=function(e){return e instanceof r?e:new r(o(e))},r._raw_escape=function(e){return e instanceof r?e.toHTML():"number"==typeof e?e:o(e)}})(),r})}.call(this),define("modules/core/notify",["require","exports","jquery","modules/core/accessible_announce"],function(e,t,n,r){"use strict";var i=(function(){function e(){}return e.success=function(e,t){return void 0===t&&(t=10),r.AccessibleAnnounce.polite(e,t+1),this._show(e,t,"server-success"),this.current()},e.error=function(e,t){return void 0===t&&(t=10),r.AccessibleAnnounce.assertive(e,t+1),this._show(e,t,"server-error"),this.current()},e.warning=function(e,t){return void 0===t&&(t=10),r.AccessibleAnnounce.polite(e,t+1),this._show(e,t,"server-warning"),this.current()},e.info=function(e,t){return void 0===t&&(t=10),r.AccessibleAnnounce.polite(e,t+1),this._show(e,t,"server-info"),this.current()},e.clear=function(){this._last_timeout&&clearTimeout(this._last_timeout),this._last_animation&&this._last_animation.stop(),this._last_timeout=null,this._last_animation=null,n("#notify").removeClass("server-error server-info server-success server-warning").hide()},e.isShown=function(){return n("#notify").is(":visible")},e.current=function(){return this._last_timeout},e._show=function(e,t,n){return this._buildElement(),this.clear(),this._setMessage(e),this._showElement(n),this._scheduleHide(t),this.current()},e._buildElement=function(){if(!n("#notify").length){n("body").append('<div id="notify-wrapper" class="notify-wrapper"> <span id="notify" style="display: inline-block"> <span id="notify-msg" class="notify-msg" /> </span> </div>'),n(".maestro .has-top-notification").length&&n("#notify-wrapper").addClass("with-top-notification")}},e._setMessage=function(e){var t=n("#notify-msg");e.toHTML?t.html(e.toHTML()):"string"==typeof e?t.text(e):e instanceof n&&(t.empty(),t.append(e))},e._showElement=function(e){var t=n("#notify");t.addClass(e),this._last_animation=t.fadeIn(500)},e._scheduleHide=function(e){this._last_timeout=setTimeout(this._hide,1e3*e)},e._hide=function(){var e=n("#notify");return this._last_animation=e.fadeOut(1e3),this._last_timeout=null},e})();return INLINE_JS.Notify=i,i}),define("modules/core/uri",["require","exports","modules/core/exception"],function(e,t,n){"use strict";var r=(function(){function e(t){if(void 0===t&&(t={}),!(this instanceof e))return new e(t);this.query=new i,this.initFromObject(t)}return e.prototype.initFromObject=function(e){this.setScheme(e.scheme),this.authority=e.authority||"",this.path=e.path||"",this.setQuery(e.query),this.fragment=e.fragment||""},e.prototype.getScheme=function(){return this.scheme},e.prototype.getAuthority=function(){return this.authority},e.prototype.getPath=function(){return this.path},e.prototype.getQuery=function(){return this.query.dict},e.prototype.getFragment=function(){return this.fragment},e.prototype.setScheme=function(e){return void 0===e&&(e=""),n.assert(!e||Boolean(e.match(/^[a-zA-Z][a-zA-Z0-9+.\-]*$/)),"Invalid scheme",{exc_extra:{scheme_param:e}}),this.scheme=e,this},e.prototype.setAuthority=function(e){return void 0===e&&(e=""),this.authority=e,this},e.prototype.setPath=function(e){return void 0===e&&(e=""),this.path=e,this},e.prototype.setQuery=function(e){return void 0===e&&(e={}),this.query=new i(e),this},e.prototype.setFragment=function(e){return void 0===e&&(e=""),this.fragment=e,this},e.prototype.updateQuery=function(e,t){return this.query.add(e,t),this},e.prototype.removeQuery=function(e){return this.query.remove(e),this},e.prototype.clone=function(){return new e(this.toObject())},e.prototype.toObject=function(){return{scheme:this.getScheme(),authority:this.getAuthority(),path:this.getPath(),query:this.getQuery(),fragment:this.getFragment()}},e.prototype.toString=function(){var t="";this.scheme&&(t+=this.scheme+":"),this.authority&&(t+="//"+e.encode(this.authority,":@[]")),this.path&&(n.assert(!this.authority||!this.path.length||"/"===this.path[0],'Path must start with a "/" if URI is not relative'),t+=e.encode(this.path,"/"));var r=this.query.toString();return r&&(t+="?"+r),this.fragment&&(t+="#"+e.encode(this.fragment,":@[]/&=+?#!")),t},e.parse=function(t){n.assert(null!=t,"must pass in a valid url-encoded string",{exc_extra:{uri_string_param:t}});var r=String(t).match(/^(?:([^:\/\\?#]+):)?(?:[\/\\]{2}([^\/\\?#]*))?([^?#]*)(?:\?([^#]*))?(?:[#](.*))?$/)||[],o=r[1],s=r[2],a=r[3],u=r[4],c=r[5],l=new e;return l.setScheme(o),l.setAuthority(e.decode(s)),l.setPath(e.decode(a)),l.setQuery(i.parseString(u)),l.setFragment(e.decode(c)),l},e.decode=function(e){return e?decodeURIComponent(e):""},e.encode=function(e,t){if(void 0===t&&(t=""),!e)return"";e=encodeURIComponent(e),t+="~";for(var n=0,r=t;n<r.length;n++){var i=r[n],o=encodeURIComponent(i);e=e.replace(new RegExp(o,"g"),i)}return e},e.encode_parts=function(t,n){return void 0===n&&(n="/"),t.split(n).map(function(t){return e.encode(t)}).join(n)},e})(),i=(function(){function e(e){void 0===e&&(e={}),this.dict={},this.add(e)}return e.parseString=function(t){if(!t)return{};var n={};return t.split("&").forEach(function(t){if(""!==t){var r=t.split("="),i=e.decode(r[0]),o=e.decode(r.slice(1).join("="));if(n.hasOwnProperty(i)){var s=n[i];"string"==typeof s&&(n[i]=[s]),n[i].push(o)}else n[i]=o}}),n},e.prototype.add=function(e,t){if("string"==typeof e)t&&(Array.isArray(t)?this.dict[e]=t.map(String):this.dict[e]=String(t));else for(var n in e)if(e.hasOwnProperty(n)){var r=e[n];null!=r&&(Array.isArray(r)?this.dict[n]=r.map(String):this.dict[n]=String(r))}return this},e.prototype.remove=function(e){return delete this.dict[e],this},e.prototype.replace=function(e){return this.dict=e,this},e.prototype.toString=function(){for(var t=[],n=Object.keys(this.dict).sort(),r=function(n){if(i.dict.hasOwnProperty(n)){var r=i.dict[n];Array.isArray(r)?r.forEach(function(r){t.push(e.encode(n)+"="+e.encode(r))}):t.push(e.encode(n)+"="+e.encode(r))}},i=this,o=0,s=n;o<s.length;o++){r(s[o])}return t.length?t.join("&"):""},e.decode=function(e){return null==e?"":r.decode(e.replace(/\+/g,"%20"))},e.encode=function(e){return null==e?"":r.encode(e).replace(/%20/g,"+")},e})();return(function(e){e.Query=i})(r||(r={})),r});
//# sourceMappingURL=pkg-core.min.js-vfl-Cr7Ei.map